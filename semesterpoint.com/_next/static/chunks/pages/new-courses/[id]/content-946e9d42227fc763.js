(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[546],{41609:function(e,t,n){var s=n(280),i=n(64160),o=n(35694),r=n(1469),a=n(98612),l=n(44144),c=n(25726),u=n(36719),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(r(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||u(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!s(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},77176:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new-courses/[id]/content",function(){return n(79280)}])},79280:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var s=n(47568),i=n(26042),o=n(69396),r=n(828),a=n(29815),l=n(97582),c=n(85893),u=n(10802),d=n(92817),b=n(47041),_=n(96076),f=n(84082),v=n(39886),h=n(54610),p=n(79862),m=n(35510),w=n(81051),g=n(34689),y=n(81780),C=n(33073),j=n(26683),x=n(60766),k=n(67814),Z=n(59417),E=n(11163),N=(n(45700),n(7386)),T=n(67294),A=n(252),I=n(99488),P=(n(66961),n(96486)),S=n(49756),L=n(89885),F=n(45508),O=n(99209),q=n(43041),M=n(48927);var z=n(22490),D=n(91444),U=n(24681),G=n(74749),K=n(47628),R=(n(30381),n(98395)),V=n(24271),Y=n(10596),W=n(32109);function H(e){var t,n,r=e.course,d=e.tests,b=e.liveCourses,N=(e.upcomingCourses,e.vodCourses),F=e.telegramLinks,G=e.feedPosts,H=e.lcId,J=e.api,X=(0,T.useState)({}),B=X[0],$=X[1],Q=(0,E.useRouter)(),ee=(0,T.useState)(Q.query.activeTab||"Content"),te=ee[0],ne=ee[1],se=(0,T.useContext)(L.Z),ie=se.appConfig,oe=se.currentUser,re=!ie.isWindowsApp&&"2"==r.view_in_web,ae=(0,T.useState)(!1),le=ae[0],ce=ae[1],ue=(0,T.useState)(!1),de=ue[0],be=ue[1],_e=(0,T.useState)(!1),fe=_e[0],ve=_e[1],he=(0,T.useState)(!1),pe=(he[0],he[1]),me=(0,z.h)(null===r||void 0===r?void 0:r.is_aadhar_mandatory),we=(0,z.h)(ie.web_enableaadharcoursemandatory),ge=(0,T.useMemo)((function(){return ie.web_courseFeedName||"Feed"}),[ie]),ye=(0,T.useMemo)((function(){return ie.web_courseDoubtsName||"Doubts"}),[ie]),Ce=(0,T.useMemo)((function(){return ie.web_courseTestsName||"Tests"}),[ie]),je=((0,T.useMemo)((function(){return ie.web_courseScheduleName||"Scheduled"}),[ie]),[{title:ie.web_courseliveupcomingname||"Live & Upcoming",component:function(){return(0,c.jsx)(I.Z,{courseId:r.id,isCoursePurchased:r.is_paid,videos:b,isFolderCourse:"1",setShowLocked:ce,viewInWeb:null===r||void 0===r?void 0:r.view_in_web})},isEnabled:"1"==r.enable_tabs_control?"1"==r.show_live_upcoming_tab:"1"!=ie.web_disablepc4livetab,hasContent:(null===b||void 0===b?void 0:b.length)>0&&!re},{title:ie.web_coursecontentname,component:function(){return(0,c.jsx)(u.Z,{itemId:r.id,course:r,screenType:"purchased",showLocked:ce})},isEnabled:"1"==r.enable_tabs_control?"1"==r.show_content_tab:"1"!=ie.web_disablepc4contenttab,hasContent:!0},{title:Ce,component:function(){return(0,c.jsx)(A.Z,{testSeries:d})},isEnabled:"1"==r.enable_tabs_control?"1"==r.show_test_tab:(null===d||void 0===d?void 0:d.length)>0,hasContent:(null===d||void 0===d?void 0:d.length)>0},{title:ye,component:function(){return(0,c.jsx)(M.Z,{courseId:r.id,isFolderCourse:1,isMyDoubtsEnabled:"1"==r.enable_tabs_control?r.show_my_doubts_tab:ie.web_enablecoursemydoubts,isAllDoubtsEnabled:"1"==r.enable_tabs_control?r.show_all_doubts_tab:ie.web_enablecoursealldoubts})},isEnabled:"1"==r.enable_tabs_control?"1"==r.show_my_doubts_tab||"1"==r.show_all_doubts_tab:"1"==ie.web_enablecoursealldoubts||"1"==ie.web_enablecoursemydoubts,hasContent:!1},{title:ie.isTeachCode?"Communities":ie.web_courselinksname||"Telegram",component:function(){return(0,c.jsx)(q.Z,{telegramLinks:F,isPurchased:r.is_paid})},isEnabled:"1"==r.enable_tabs_control?"1"==r.show_telegram_tab:((0,P.isEmpty)(ie.web_enablecoursetelegramlinks)||"0"!=ie.web_enablecoursetelegramlinks)&&(null===F||void 0===F?void 0:F.length)>0,hasContent:(null===F||void 0===F?void 0:F.length)>0},{title:ge,component:function(){return(0,c.jsx)(U.Z,{posts:G,courseId:r.id})},isEnabled:"1"==r.enable_tabs_control?"1"==r.show_feed_tab:(null===(t=G.data)||void 0===t?void 0:t.length)>0,hasContent:(null===G||void 0===G||null===(n=G.data)||void 0===n?void 0:n.length)>0}]);if(je=(0,P.sortBy)(je,(function(e){return!e.hasContent})),(null===N||void 0===N?void 0:N.length)>0){var xe,ke=N.map((function(e,t){var n="".concat((0,P.isEmpty)(ie.web_vodcourselabel)?"Vod Course":ie.web_vodcourselabel," ").concat(t+1);return{title:n,component:function(){return(0,c.jsx)("div",{children:te==n&&(0,c.jsx)(u.Z,{course:r,itemId:e,screenType:"purchased",showLocked:ce})})},isEnabled:!0,hasContent:!0}}));(xe=je).push.apply(xe,(0,a.Z)(ke))}var Ze=function(e){be("boolean"===typeof e?e:function(e){return!e})},Ee=function(){var e=(0,s.Z)((function(e){var t,n,s,i,o,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),ve(!0),[4,(0,W.$Z)({item_id:r.id,item_type:10,pan_number:e.pan_card_number,name_on_pan:e.name,date_of_birth:e.date_of_birth})];case 1:return(t=l.sent()).success?(pe(!0),ve(!1),Ze(!1),window.sessionStorage.removeItem(_.dA.TELEGRAM_LINK),Ne(),[2,!0]):(n=t.data.error_details)?[2,n]:(ve(!1),D.Am.error("PAN verification failed"),[2,!1]);case 2:return s=l.sent(),console.error(s),ve(!1),D.Am.error("Failed to verify PAN"),(o=null===(i=s.response)||void 0===i?void 0:i.data)&&"object"===typeof o&&(a=o.data.error_details)?[2,a]:[2,!1];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();(0,T.useEffect)((function(){ie&&("1"!=ie.isWindowsApp&&"0"==r.view_in_web&&Q.replace("/purchases"),me&&we&&!(0,z.h)(null===oe||void 0===oe?void 0:oe.aadhar_status)&&(D.Am.error("Please update your Aadhar details to continue"),Q.replace("/settings")))}),[ie]),(0,T.useEffect)((function(){if(!Q.query.activeTab){var e=je.filter((function(e){return e.isEnabled}));e.length>0&&(ne(e[0].title),Q.replace({query:(0,o.Z)((0,i.Z)({},Q.query),{activeTab:e[0].title})},"",{shallow:!0}))}var t=window.fbq;"undefined"!=typeof t&&t("track","ViewContent")}),[]);var Ne=function(){var e=(0,s.Z)((function(){var e,t,n,s,i,o;return(0,l.__generator)(this,(function(a){switch(a.label){case 0:if(!(0,z.h)(r.is_tgconnect_enabled))return[2];"",e=!1,a.label=1;case 1:return a.trys.push([1,4,,5]),null,e?[3,3]:[4,(0,K.io)("",r.id,10)];case 2:n=a.sent(),(null===(t=n.data)||void 0===t?void 0:t.error_code)!=R.c.PURCHASE_NOT_FOUND&&((null===(s=n.data)||void 0===s?void 0:s.invite_link)||!1===(null===(i=n.data)||void 0===i?void 0:i.is_pan_verified))&&$(n.data),a.label=3;case 3:return[3,5];case 4:return o=a.sent(),console.log(o,"error"),$({}),[3,5];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,T.useEffect)((function(){Ne()}),[r.id]),(0,T.useEffect)((function(){H&&(0,O.OF)({lcId:H,lcApi:J}).then((function(e){(0,P.isEmpty)(e)||(0,V.G5)(e,"[LINKEDCOURSE-".concat(11,"-").concat(H,"]"))})).catch((function(e){console.log("Error in getting firebase config",e)}))}),[H,J]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,c.jsxs)("h3",{className:"mb-0",children:[(0,c.jsx)(f.Z,{color:"link",className:"ps-0 py-0 position-absolut start-0",style:{top:"12px"},onClick:function(){Q.back()},children:(0,c.jsx)(k.G,{icon:Z.jio,color:"gray",size:"lg"})}),r.course_name]})}),((null===B||void 0===B?void 0:B.invite_link)||!1===(null===B||void 0===B?void 0:B.is_pan_verified))&&"1"==r.is_tgconnect_enabled&&(0,c.jsx)(v.Z,{className:"bg-light",children:(0,c.jsx)(h.Z,{children:(0,c.jsx)("div",{className:"mb-0",id:"kyc-link-container",children:!1===(null===B||void 0===B?void 0:B.is_pan_verified)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"fw-bold me-2",children:"Please complete KYC to get your Telegram invite link."}),(0,c.jsx)("a",{href:"#kyc-link-container",rel:"noreferrer",onClick:function(){Ze(!0)},children:"Click here to complete KYC"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"fw-bold me-2",children:"Your Telegram invite link:"}),(0,c.jsx)("a",{href:(null===B||void 0===B?void 0:B.invite_link)||"#",target:"_blank",rel:"noreferrer",children:null===B||void 0===B?void 0:B.invite_link})]})})})}),(0,c.jsx)(p.Z,{className:"mb-4",tabs:!0,children:je.filter((function(e){return e.isEnabled})).map((function(e){return(0,c.jsxs)(m.Z,{id:(0,P.kebabCase)(e.title),children:[(0,c.jsxs)(w.Z,{disabled:re&&"Content"!=e.title&&"Tests"!=e.title,className:te.toLowerCase()==e.title.toLowerCase()?"active":"",onClick:function(){var t;t=e.title,te!==t&&(ne(t),Q.replace({query:(0,o.Z)((0,i.Z)({},Q.query),{activeTab:t})},"",{shallow:!0}))},children:[re&&"Content"!=e.title&&"Tests"!=e.title&&(0,c.jsx)(k.G,{color:"#A7A7A7",className:"me-2",icon:Z.byT}),e.title]}),re&&"Content"!=e.title&&"Tests"!=e.title&&(0,c.jsx)(g.Z,{placement:"top",target:(0,P.kebabCase)(e.title),children:"View in app"})]},e.title)}))}),(0,c.jsx)(y.Z,{activeTab:te,children:je.filter((function(e){return e.isEnabled})).map((function(e){return(0,c.jsx)(C.Z,{tabId:e.title,children:e.component()},e.title)}))}),le&&(0,c.jsx)(j.Z,{isOpen:le,toggle:function(){return ce(!1)},centered:!0,children:(0,c.jsxs)(x.Z,{className:"text-center justify-content-center p-4",children:[(0,c.jsx)("div",{className:"d-flex justify-content-center",children:(0,c.jsx)("span",{className:"lock-icon mt-3 mb-2 text-primary",children:(0,c.jsx)(k.G,{icon:Z.byT,size:"2x"})})}),(0,c.jsx)("h3",{className:"mb-0",children:"Content Locked"}),(0,c.jsx)("div",{className:"d-flex justify-content-center",children:(0,c.jsx)("div",{className:"w-5 mb-3",children:"Content is accessible only on app."})})]})}),("1"==r.enable_tabs_control?"1"==r.is_groupchat_enabled:"1"==ie.web_enablecoursegroupchat)&&ie.web_firebaseconfig&&(0,c.jsx)(S.Z,{course:r,isFolderCourse:!0}),de&&(0,c.jsx)(Y.Z,{isOpen:de,toggle:Ze,onVerifyPan:Ee,isLoading:fe})]})}H.getInitialProps=function(){var e=(0,s.Z)((function(e){var t,n,s,c,u,f,v,h,p,m,w,g,y,C,j,x;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.query,n=e.res,s=t.api?(0,F.NA)(t.api):(0,b.getCookie)(_.z1,e),(c=(0,b.getCookie)(_.JR,e))?(u=t.id,[4,(0,d.Yt)(s,u,t.lcId,(0,b.getCookie)(_.z1,e))]):[2,{statusCode:401}];case 1:if((null===(f=l.sent())||void 0===f?void 0:f.length)<1)return[2,{statusCode:404}];if(!t.lcId&&n&&"1"!=f[0].is_paid)return n.writeHead(307,{Location:"/new-courses/".concat(t.id)}),n.end(),[2];m=(0,N.CK)(s,t.id,c,"1"),w=(0,d.jU)(s,t.id,t.lcId,(0,b.getCookie)(_.z1,e)),g=null,l.label=2;case 2:return l.trys.push([2,4,,5]),[4,(0,G.J)(s,t.id,0)];case 3:return g=l.sent(),[3,5];case 4:return l.sent(),[3,5];case 5:y=(0,O.PS)(s,t.id,"10"),l.label=6;case 6:return l.trys.push([6,8,,9]),[4,Promise.allSettled([m,w,y]).then((function(e){return e.map((function(e){if("fulfilled"==e.status)return e.value;if("rejected"==e.status)throw new Error(e.reason)}))}))];case 7:return C=r.Z.apply(void 0,[l.sent(),3]),v=C[0],h=C[1],p=C[2],[3,9];case 8:return[2,{statusCode:500,e:null===(j=l.sent())||void 0===j?void 0:j.message}];case 9:return x=[],(0,P.isEmpty)(f[0].vod_courses)||"undefined"==f[0].vod_courses||(x=f[0].vod_courses.split(",").filter((function(e){return""!=e}))),[2,(0,o.Z)((0,i.Z)({},t),{api:s,course:f[0],liveCourses:(0,a.Z)(h.live).concat((0,a.Z)(h.upcoming)),tests:v||null,telegramLinks:p,vodCourses:x,feedPosts:g})]}}))}));return function(t){return e.apply(this,arguments)}}()}},function(e){e.O(0,[9412,2238,1036,8404,5675,2480,7340,7432,8978,2946,6308,8446,9530,2181,2605,2717,7603,6004,7517,8044,4786,3956,6461,5487,6970,1984,3220,4484,4681,9774,2888,179],(function(){return t=77176,e(e.s=t);var t}));var t=e.O();_N_E=t}]);