"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7603],{97603:function(e,n,r){r.d(n,{Z:function(){return T}});var s=r(47568),c=r(29815),t=r(97582),i=r(85893),l=r(59417),o=r(67814),a=r(96486),u=r(30381),d=r.n(u),p=r(67294),x=r(3126),m=r(60994),f=r(87261),h=r(84082),j=r(78076),v=r(35773),_=r(95305),b=r(39886),y=r(54610),N=r(89163),Z=r(47628),g=r(89885),w=r(47041),C=r(96076),S=r(22490),k=r(16407),M=r(3751);function E(e){var n=e.countdownTime,r=e.expiryDate,s=d()(r).toDate(),c=d()(),t=d()(r).diff(c,"seconds"),l=(0,M.useTimer)({expiryTimestamp:s,autoStart:!0}),o=l.seconds,a=l.minutes,u=l.hours,p=l.days;if(t>3600*n||t<=0)return null;var x=function(e){return e.toString().padStart(2,"0")};return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"text-xs font-semibold",children:"Expires in:"}),(0,i.jsxs)("div",{className:"flex gap-x-1",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("span",{className:"text-base font-bold",children:x(p)}),(0,i.jsx)("span",{className:"text-xs text-gray",children:"Days"})]}),(0,i.jsx)("span",{className:"text-sm text-gray",children:":"}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("span",{className:"text-base font-bold",children:x(u)}),(0,i.jsx)("span",{className:"text-xs text-gray",children:"Hrs"})]}),(0,i.jsx)("span",{className:"text-sm text-gray",children:":"}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("span",{className:"text-base font-bold",children:x(a)}),(0,i.jsx)("span",{className:"text-xs text-gray",children:"Mins"})]}),(0,i.jsx)("span",{className:"text-sm text-gray",children:":"}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("span",{className:"text-base font-bold",children:x(o)}),(0,i.jsx)("span",{className:"text-xs text-gray",children:"Secs"})]})]})]})}function T(e){var n,r,u,M,T=e.product,R=e.couponCode,I=e.setCouponCode,P=e.studyMaterialSelected,A=e.creditsApplied,F=e.setCreditsApplied,D=e.setFinalPrice,O=e.currency,z=e.setCurrency,G=e.alignEnd,B=e.disableAffiliateCode,H=e.selectedInstallments,L=e.exchangeRates,K=e.selectedPlan,Q=(e.selectedSubscriptionPlan,e.couponBtnColor),W=void 0===Q?"primary":Q,Y=e.hideCouponSelect,q=e.testPass,J=e.onBeforeCouponApply,U=e.autoApplyCoupon,V=e.isLinkedCourse,X=e.isTestPass,$=void 0!==X&&X,ee=(0,p.useState)(0),ne=ee[0],re=ee[1],se=(0,p.useState)(),ce=se[0],te=se[1],ie=(0,p.useContext)(g.Z).appConfig,le=(0,p.useState)(0),oe=le[0],ae=le[1],ue=(0,p.useState)(0),de=ue[0],pe=ue[1],xe=(0,p.useState)(0),me=xe[0],fe=xe[1],he=(0,p.useState)(),je=he[0],ve=he[1],_e=(0,p.useState)(),be=_e[0],ye=_e[1],Ne=(0,p.useState)(1),Ze=(Ne[0],Ne[1],(0,p.useState)(!1)),ge=Ze[0],we=Ze[1],Ce=(0,p.useRef)(null),Se=0,ke=0,Me=T.price,Ee=(0,p.useState)(!1),Te=Ee[0],Re=Ee[1],Ie=(0,p.useMemo)((function(){return(0,S.h)(T.enable_international_pricing)}),[T.enable_international_pricing]),Pe=(0,p.useMemo)((function(){return(0,S.h)(ie.web_enableinternationalpayments)}),[ie.web_enableinternationalpayments]),Ae=(0,p.useMemo)((function(){return!Ie&&Pe}),[Ie,Pe]),Fe=(0,p.useMemo)((function(){return"0"==ie.web_enablecouponcode||Y||(0,S.h)(T.disable_discount_code)}),[ie.web_enablecouponcode,Y,T.disable_discount_code]),De=(0,p.useMemo)((function(){return(0,S.h)(null===T||void 0===T?void 0:T.is_sebi_flow_enabled)}),[null===T||void 0===T?void 0:T.is_sebi_flow_enabled]),Oe=(0,p.useMemo)((function(){var e,n,r=null!==(n=null===T||void 0===T||null===(e=T.sebi_details)||void 0===e?void 0:e.consent_type)&&void 0!==n?n:C.ng.NONE;return!(!De||r===C.ng.NONE)}),[De,null===T||void 0===T||null===(n=T.sebi_details)||void 0===n?void 0:n.consent_type]),ze=(0,p.useMemo)((function(){var e,n,r=null!==(n=null===T||void 0===T||null===(e=T.sebi_details)||void 0===e?void 0:e.pan_verification_mode)&&void 0!==n?n:C.Qi.NONE;return!(!De||r===C.Qi.NONE)}),[De,null===T||void 0===T||null===(r=T.sebi_details)||void 0===r?void 0:r.pan_verification_mode]);if((null===H||void 0===H?void 0:H.length)>0){var Ge=T.installmentPlans.filter((function(e){return H.includes(e.ins_no)})).map((function(e){return e.ins_price}));Se=(0,a.sum)(Ge)}T.price_without_gst>0&&(T.gst=T.price-T.price_without_gst),Se>0&&(Me=Se),P&&(Me=Number(Me)+Number(P.price));var Be,He,Le,Ke,Qe=V&&T.linked_price_kicker?T.linked_price_kicker:T.priceKicker;(ke=ne>0?(Number(Me)-Number(ne))*Number(Qe)/100:Number(Me)*Number(Qe)/100,T.uhs_price=Number(T.uhs_price),T.uhs_price>0&&(ke=Number(ke)+Number(T.uhs_price)),Oe)&&(ke=null!==(He=Number(ke)+Number(null===T||void 0===T||null===(Be=T.sebi_details)||void 0===Be?void 0:Be.aadhar_consent_price))&&void 0!==He?He:0);ze&&(ke=null!==(Ke=Number(ke)+Number(null===T||void 0===T||null===(Le=T.sebi_details)||void 0===Le?void 0:Le.pan_verification_price))&&void 0!==Ke?Ke:0);var We=(0,p.useMemo)((function(){return"INR"==O}),[O]);(0,p.useEffect)((function(){var n=B?null:localStorage.getItem("discount_code");(n||e.couponCode)&&(I(e.couponCode||n),U&&Ye(e.couponCode||n)),qe(),D(Je())}),[]),(0,p.useEffect)((function(){D(be||Je()),null==me||me<=0||(me>Je()?ve(Je()-11):ve(me))}),[H,Se,ke,P,q,Me,A,me,ne,be]),(0,p.useEffect)((function(){"INR"!=O&&ye(L[O]*Je())}),[O]);var Ye=function(){var n=(0,s.Z)((function(n){var r,s;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return n?J?[4,J(n)]:[3,2]:[2];case 1:if(!t.sent())return[2];t.label=2;case 2:return r=$?Z.OM:Z.zL,s=$?[n,T.itemId,T.itemType,null===H||void 0===H?void 0:H.join(","),null===K||void 0===K?void 0:K.id,"0",ie.web_apiurl,"https://thetestpassapi.akamai.net.in"]:[n,T.itemId,T.itemType,null===H||void 0===H?void 0:H.join(","),null===K||void 0===K?void 0:K.id],[4,r.apply(void 0,(0,c.Z)(s)).then((function(n){te(!0),F(0),e.setCouponResponse&&e.setCouponResponse(n);var r=n.percent_off>0?Me*n.percent_off/100:n.flat_price;if(n.maxdiscount>0&&r>n.maxdiscount&&(r=n.maxdiscount),100==n.percent_off&&(r=Me,T.uhs_price=0),re(We?Math.round(r):r),T.price_without_gst>0){var s=n.percent_off>0?1-n.percent_off/100:1-n.flat_price/T.price,c=We?Math.round(T.price_without_gst*s):T.price_without_gst*s,t=We?Math.round(T.gst*s):T.gst*s;ae(c),pe(t)}})).catch((function(e){te(!1),I("")}))];case 3:return t.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),qe=function(){var e=(0,s.Z)((function(){var e,n,r,s,c;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:e=(0,w.getCookie)(C.JR)||-1,t.label=1;case 1:return t.trys.push([1,3,,4]),-1==e?[2]:[4,(0,Z.M_)("",e)];case 2:return r=t.sent(),s=Number(null===r||void 0===r||null===(n=r[0])||void 0===n?void 0:n.refer_credits),isNaN(s)||fe(s),[3,4];case 3:return c=t.sent(),console.error("error",c),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=(null===H||void 0===H?void 0:H.length)>0?Se:Number(T.price);return ne>0&&(e-=ne),ke>0&&(e+=ke),P&&(e+=Number(P.price)),A&&(e-=A),q&&(e+=Number(q.price)),We?Math.round(e):e};return(0,p.useEffect)((function(){Ce.current&&Re(Ce.current.clientWidth<650);var e=new ResizeObserver((function(e){var n=e[0].contentRect.width;Re(n<650)}));return Ce.current&&e.observe(Ce.current),function(){Ce.current&&e.unobserve(Ce.current)}}),[null===(u=Ce.current)||void 0===u?void 0:u.clientWidth]),(0,p.useEffect)((function(){we(!Te)}),[Te]),(0,i.jsxs)("div",{className:"d-flex ".concat(Te?"flex-column":"flex-row-reverse"),ref:Ce,children:[(0,i.jsx)("div",{className:"d-flex flex-column ".concat(Te?"px-0 mx-0":"ps-2"),style:{flex:1},children:!Fe&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"mt-3 mb-3",children:[(0,i.jsxs)(x.Z,{role:"button",className:"d-flex flex-row justify-content-between",onClick:function(){return we(!ge)},children:[(0,i.jsx)("span",{className:"font-bold",children:"Apply Coupon"}),(0,i.jsx)("span",{children:(0,i.jsx)(o.G,{icon:ge?l.mTx:l.ptq})})]}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(f.Z,{onChange:function(e){return I(e.target.value)},bsSize:"sm",value:R,className:"border-end-0",onKeyPress:function(e){return"Enter"==e.key&&Ye(R)}}),(0,i.jsx)(h.Z,{onClick:function(){return Ye(R)},color:W,size:"sm",children:"Apply"})]}),null!=ce&&(0,i.jsx)(j.Z,{color:ce?"success":"danger",children:ce?"Coupon applied successfully":"Invalid coupon applied"})]}),ge&&(0,i.jsx)(v.Z,{className:"mb-3",children:null===(M=T.featured_discounts)||void 0===M?void 0:M.map((function(e){return(0,i.jsx)(_.Z,{md:"6",className:"p-2 cursor-pointer",children:(0,i.jsx)(b.Z,{onClick:function(){I(e.coupon_code),Ye(e.coupon_code)},children:(0,i.jsxs)(y.Z,{className:"p-3 d-flex flex-column gap-y-2",children:[(0,i.jsxs)("div",{className:"font-bold font-lg",children:[e.percent_off>0?"".concat(e.percent_off,"% off"):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.Z,{price:e.flat_price,mrp:e.flat_price,currency:e.currency}),(0,i.jsx)("span",{children:" off"})]})," ",e.maxdiscount>0?(0,i.jsxs)("span",{className:"font-sm font-regular",children:[(0,i.jsx)("span",{children:"upto "}),(0,i.jsx)(k.Z,{price:e.maxdiscount,mrp:e.maxdiscount,currency:e.currency})]}):""," ",(0,i.jsx)("img",{src:"/icons/coupon.svg",width:"30",className:"float-end",alt:"coupon icon"})," "]}),(0,i.jsx)("div",{children:e.coupon_code}),"1"===e.enable_countdown_timer&&parseInt(e.countdown_time)>0&&(0,i.jsx)(E,{countdownTime:parseInt(e.countdown_time),expiryDate:e.expiry_date}),"1"!=ie.web_disablecouponexpiry&&(0,i.jsxs)("div",{className:"font-xs",children:["Expires on:"," ",d()(e.expiry_date).format("DD MMM, YY")]})]})})},e.id)}))})]})}),(0,i.jsxs)("div",{className:"d-flex flex-column ".concat(Te?"px-0 mx-0":"pe-2"," ").concat(G?"payment-align-end":""),style:{flex:1},children:[(0,i.jsx)("div",{className:"font-bold mb-2",children:"Summary"}),Ae&&L&&(0,i.jsxs)(v.Z,{className:"mb-1 align-items-end",children:[(0,i.jsx)(_.Z,{children:"Payment Currency"}),(0,i.jsx)(_.Z,{className:"font-xl font-bold ",children:(0,i.jsx)(f.Z,{type:"select",bsSize:"sm",className:"py-0 ".concat(G?"ms-auto":""),style:{width:"80px"},onChange:function(e){return z(e.target.value)},value:O,children:Object.keys(L).map((function(e){return(0,i.jsx)("option",{children:e},e)}))})})]}),0==(null===H||void 0===H?void 0:H.length)&&T.price_without_gst>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(_.Z,{children:"Price (Excluding GST)"}),(0,i.jsxs)(_.Z,{children:[(0,i.jsx)("span",{className:oe>0?"text-gray text-decoration-line-through me-2":"",children:(0,i.jsx)(k.Z,{price:T.price_without_gst,mrp:T.price_without_gst,currency:T.currency})}),oe>0?(0,i.jsx)(k.Z,{price:oe,mrp:oe,currency:T.currency}):""]})]}),(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(_.Z,{children:"GST"}),(0,i.jsxs)(_.Z,{children:[(0,i.jsx)("span",{className:de>0?"text-gray text-decoration-line-through me-2":"",children:(0,i.jsx)(k.Z,{price:T.gst,mrp:T.gst,currency:T.currency})}),de>0?(0,i.jsx)(k.Z,{price:de,mrp:de,currency:T.currency}):""]})]})]}):(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(_.Z,{children:"Price (Including GST)"}),(0,i.jsx)(_.Z,{children:(0,i.jsx)(k.Z,{price:Se>0?Se:T.price,mrp:Se>0?Se:T.price,currency:T.currency})})]}),P&&(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(_.Z,{children:"Book Price"}),(0,i.jsx)(_.Z,{children:(0,i.jsx)(k.Z,{price:P.price,mrp:P.price,currency:T.currency})})]}),q&&(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(_.Z,{children:"Test Pass Subscription"}),(0,i.jsx)(_.Z,{children:(0,i.jsx)(k.Z,{price:q.price,mrp:q.price,currency:q.currency})})]}),(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(_.Z,{children:"Net Discount"}),!Fe&&(0,i.jsxs)(_.Z,{className:"d-flex flex-column gap-2 ".concat(Number(ne)>0?"text-success":""),children:[(0,i.jsx)("span",{children:(0,i.jsx)(k.Z,{price:Number(ne),mrp:Number(ne),currency:T.currency})}),(0,i.jsx)("span",{role:"button",className:"text-blue",onClick:function(){return we((function(e){return!e}))},children:"".concat(ge?"Hide":"Show"," Coupons")})]})]}),Number(ke)>0&&(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(_.Z,{children:"Internet Handling Fees"}),(0,i.jsx)(_.Z,{children:(0,i.jsx)(k.Z,{price:ke>0?We?Math.round(ke):ke:"0",currency:T.currency})})]}),(0,i.jsxs)(v.Z,{className:G?"border-top border-dark pt-2 mt-2":"",children:[(0,i.jsx)(_.Z,{children:"Total"}),(0,i.jsx)(_.Z,{className:"font-xl font-bold",children:(0,i.jsx)(k.Z,{price:Je(),mrp:Je(),currency:T.currency})})]}),"INR"!=O&&be>0&&(0,i.jsxs)(v.Z,{children:[(0,i.jsxs)(_.Z,{children:["Total in ",O," (approx.)"]}),(0,i.jsx)(_.Z,{className:"font-xl font-bold",children:(0,i.jsx)(k.Z,{price:be.toFixed(2),mrp:be.toFixed(2),currency:O})})]}),!Ie&&je>=1&&((0,a.isEmpty)(ie.web_menuitems)?"1"==ie.web_enablemenureferral:(0,a.some)(ie.web_menuitems,{type:"REFERRAL"}))&&(0,i.jsxs)(N.Z,{check:!0,children:[(0,i.jsx)(f.Z,{id:"applyCredits",type:"checkbox",checked:A>0,onChange:function(){F(A>0?0:je)}}),(0,i.jsxs)(x.Z,{for:"applyCredits",className:"mb-0",children:["Apply Credits -"," ",(0,i.jsx)(k.Z,{price:null!==je&&void 0!==je?je:0,mrp:null!==je&&void 0!==je?je:0,currency:T.currency})]})]})]})]})}}}]);