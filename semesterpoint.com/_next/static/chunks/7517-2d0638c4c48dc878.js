"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7517],{37517:function(e,t,n){n.d(t,{Z:function(){return z}});var a=n(47568),r=n(26042),i=n(69396),s=n(29815),o=n(97582),c=n(85893),l=n(67294),u=n(84082),d=n(15974),v=n(54347),f=n(60994),m=n(87261),h=n(5152),p=n.n(h),x=n(89355),_=n(89885),y=n(73716),b=n(24271),g=n(96486),w=n(3751),k=n(91444),j=n(67814),N=n(59417),S=n(34288),Z=n(45508),E=n(97340),A=n(39886),M=n(56599),L=n(25062);function q(e){var t=e.firebase,n=e.id,r=(0,l.useState)(),i=r[0],u=r[1],d=(0,l.useState)({}),v=d[0],f=d[1],m=(0,x.N8)(t),h=(0,x.iH)(m,"/data/live_quick_polls/"+n+"/active_poll_v2"),p=(0,x.iH)(m,"/data/live_quick_polls/"+n),y=(0,x.iH)(m,"/data/live_quick_polls/"+n+"/enable_leaderboard"),b=(0,x.iH)(m,"/data/live_quick_polls/"+n+"/active_poll_answer"),k=(0,l.useContext)(_.Z),S=e.currentUser||k.currentUser,Z=(0,l.useState)(!1),E=Z[0],q=Z[1],C=(0,l.useState)([]),D=C[0],H=C[1],I=(0,l.useState)(),R=I[0],F=I[1],V=(0,w.useTimer)({autoStart:!1,expiryTimestamp:new Date}),T=(0,l.useState)(),O=T[0],G=T[1],U=(0,l.useState)(!1),z=U[0],P=U[1],B=function(e){var t=e.key,n=i.totalOptions,a=parseInt(t);a>=1&&a<=n&&!O&&J(a-1)};(0,l.useEffect)((function(){return(0,x.jM)(h,(function(e){var t=e.val(),n=null===t||void 0===t?void 0:t.active_poll_data;if(n&&n.question?(u(n),f((null===t||void 0===t?void 0:t.poll_config)||{}),n.isAnswerType=!(0,g.isEmpty)(n.answer),n.poll_duration>0&&V.restart(new Date(n.created_at+n.poll_duration),!0),q(!0)):(u(null),f({}),n=null,q(!1)),null==n)return F(null),H([]),void q(!1)})),(0,x.jM)(y,(function(e){var t=e.val();P(1==t)})),W(),function(){(0,x.S1)(h,"value"),(0,x.S1)(y,"value")}}),[]),(0,l.useEffect)((function(){var e;return R?(Q(),e=setInterval((function(){Q()}),(null===v||void 0===v?void 0:v.update_vote_duration)||5e3)):e&&clearInterval(e),function(){e&&clearInterval(e)}}),[R]),(0,l.useEffect)((function(){var e=!1;return"1"==(null===v||void 0===v?void 0:v.start_polling)?e||(document.addEventListener("keydown",B),e=!0):e&&(document.removeEventListener("keydown",B),e=!1),function(){e&&document.removeEventListener("keydown",B)}}),[null===v||void 0===v?void 0:v.start_polling]);var W=function(){var e=(0,x.iH)(m,"/data/live_quick_polls/"+n+"/user_answers/user_"+S.userid);return(0,x.U2)(e).then((function(e){var t=null===e||void 0===e?void 0:e.val();return t?(F(null===e||void 0===e?void 0:e.val()),t):null}))},Q=function(){(0,x.U2)(b).then((function(e){var t=e.val();if(t){var n=(0,s.Z)(new Array(i.totalOptions)).map((function(e,n){return t["option_".concat(n)]})).reduce((function(e,t){return e+t})),a=(0,s.Z)(new Array(i.totalOptions)).map((function(e,a){var r;return{id:a,selected:(null===R||void 0===R?void 0:R.selected_option_answers)&&(null===R||void 0===R?void 0:R.selected_option_answers.includes(a)),isAnswer:!!i.isAnswerType&&(null===(r=i.answer)||void 0===r?void 0:r.includes(a)),option:i.options[a],votes:0==n?0:Math.round(t["option_".concat(a)]/n*100)}}));H(a)}}))},J=function(){var e=(0,a.Z)((function(e){var t,a,r,s,c,l,u,d;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return"0"==v.start_polling?[2]:(G(!0),[4,W()]);case 1:return o.sent()?(G(!1),[2]):((t={})["/active_poll_answer/option_".concat(e)]=(0,x.nP)(1),a=!i.isAnswerType||i.answer[0]==e,r={is_correct:a,name:S.name,selected_option_answers:[e],selected_option_text:[i.options[e]],source:"website"},F(r),t["/user_answers/user_".concat(S.userid)]=r,z?(s=(new Date).getTime(),c=Math.abs(s-i.created_at),l=(0,x.iH)(m,"/data/live_quick_polls/".concat(n,"/leaderboard/user_").concat(S.userid,"/score")),[4,(0,x.U2)(l)]):[3,3]);case 2:u=(u=o.sent()).val()||0,t["/leaderboard/user_".concat(S.userid,"/name")]=S.name,d=i.isAnswerType?a?v.positive_marks:v.negative_marks:0,t["/leaderboard/user_".concat(S.userid,"/score")]=u+d,t["/leaderboard/user_".concat(S.userid,"/time_consumed")]=(0,x.nP)(c),t["/leaderboard/user_".concat(S.userid,"/source")]="website",o.label=3;case 3:return(0,x.Vx)(p,t),G(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),K=function(e){return(0,g.isEmpty)(R)||!i.isAnswerType?e.selected?{background:"#146fe6",color:"white"}:{background:"white"}:e.isAnswer?{background:"#25c16f",color:"white"}:e.selected&&!e.isAnswer?{background:"#dc3545",color:"white"}:void 0};return i?(0,c.jsxs)(A.Z,{color:"light",className:"mt-2 rounded-1 poll-card position-sticky top-0",children:[(0,c.jsxs)(M.Z,{onClick:function(){return q(!E)},className:"font-semi-bold cursor-pointer border-bottom-0",children:["Q: ",i.question," ","1"==v.start_polling?(0,c.jsxs)(L.Z,{color:"white",className:"float-end mt-1 text-dark",children:[(0,c.jsx)(j.G,{icon:N.diR,style:{fontSize:"9px"},beatFade:!0,className:"text-success me-1"}),"Active Poll"]}):(0,c.jsxs)(L.Z,{color:"white",className:"float-end mt-1 text-dark",children:[(0,c.jsx)(j.G,{icon:N.diR,style:{fontSize:"9px"},className:"text-danger me-1"}),"Poll Ended"]})]}),(0,c.jsx)("div",{className:"".concat(E?"max-h-full opacity-100":"max-h-0 opacity-0"," transition-all duration-300 ease-in-out overflow-hidden"),children:(0,c.jsxs)("div",{className:"justify-content-start p-3",children:[(0,g.isEmpty)(R)||(0,g.isEmpty)(D)?(0,s.Z)(new Array(i.totalOptions)).map((function(e,t){return(0,c.jsx)("div",{className:"border bg-white rounded-1 px-3 py-2 m-2",role:"button",onClick:function(){return!O&&J(t)},children:i.options&&i.options[t]},t)})):D.map((function(e){return(0,c.jsxs)("div",{style:K(e),className:"border bg-whit rounded-1 px-3 py-2 m-2 position-relative",children:[(0,c.jsxs)("div",{style:{zIndex:"100"},className:"position-relative d-flex justify-content-between font-semi-bold",children:[e.option," ",0==v.enable_private_poll&&(0,c.jsxs)("div",{children:[e.votes,"%"]})]}),0==v.enable_private_poll&&(0,c.jsx)("div",{style:{width:e.votes+"%",zIndex:"1",borderRadius:"0.5rem 0 0 0.5rem",background:"#443f4040"},className:"position-absolute top-0 start-0 h-100"})]},e.option)})),V.isRunning&&(0,c.jsxs)("div",{className:"ps-3 sub-text mb-2",children:["Poll ends in: ",(0,c.jsx)("b",{children:V.seconds+60*V.minutes})," ","secs"]})]})})]}):null}var C=n(26683),D=n(83024),H=n(60766),I=n(35773),R=n(95305);function F(e){var t=e.firebase,n=e.id,r=e.isOpen,i=e.toggle,u=e.container,d=void 0===u?"hlsplayerwithchat":u,v=(e.currentUser,(0,l.useState)()),f=v[0],m=v[1],h=(0,x.N8)(t),p=(0,x.iH)(h,"/data/live_quick_polls/"+n+"/leaderboard"),_=(0,x.iH)(h,"/data/live_quick_polls/"+n+"/active_poll_v2/poll_config/count_poll");return(0,l.useEffect)((function(){var e=(0,x.IO)(p,(0,x.g2)("score"),(0,x.vh)(50));return(0,x.jM)(e,function(){var e=(0,a.Z)((function(e){var t,n,a,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return(t=e.val())?[4,(0,x.U2)(_)]:[3,2];case 1:return n=(n=i.sent()).val()||0,Object.keys(e.val()).forEach((function(e){if(t[e].score>n){var a={};a["/".concat(e,"/score")]=n,(0,x.Vx)(p,a),t[e].score=n}})),t=(t=Object.values(t)).sort((function(e,t){return e.score==t.score?Math.abs(e.time_consumed)-Math.abs(t.time_consumed):t.score-e.score})),(a=(0,s.Z)(new Array(10))).forEach((function(e,n){t[n]?a[n]=t[n]:a[n]={}})),m(a),[3,3];case 2:r=(0,s.Z)(new Array(10)).map((function(e){return{}})),m(r),i.label=3;case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),{onlyOnce:!0}),function(){(0,x.S1)(p,"value")}}),[]),(0,c.jsxs)(C.Z,{container:d,isOpen:r,toggle:i,style:{maxWidth:"550px"},contentClassName:"bg-dark text-white opacity-75",centered:!0,children:[(0,c.jsxs)(D.Z,{className:"justify-content-center",children:[(0,c.jsx)(j.G,{icon:N.kWN,className:"text-warning me-3"}),"Leaderboard",(0,c.jsx)(j.G,{icon:N.kWN,className:"text-warning ms-3"})]}),(0,c.jsx)(H.Z,{children:(0,c.jsx)(I.Z,{children:null===f||void 0===f?void 0:f.map((function(e,t){return(0,c.jsx)(R.Z,{xs:"6",className:"mb-2",children:(0,c.jsxs)(I.Z,{className:t<f.length-2?"border-bottom m-0 pb-2":"m-0",children:[(0,c.jsxs)(R.Z,{xs:"1",children:[t+1,"."]}),(0,c.jsx)(R.Z,{className:"font-bol text-truncate pe-0",children:e.name||"-"})," ",(0,c.jsx)(R.Z,{xs:"5",className:"",children:e.score>0?"".concat(e.score," point").concat(e.score>1?"s":""):"-"})]})},e.name)}))})})]})}var V=n(62922),T=n(11163),O=n(99209),G=n(96076),U=p()((function(){return Promise.all([n.e(2344),n.e(8414)]).then(n.bind(n,88414))}),{loadableGenerated:{webpack:function(){return[88414]}},ssr:!1});function z(e){var t=e.disableHandraise,n=void 0!==t&&t,h=e.defaultChatMode,p=void 0===h?G.MV.ALL.value:h,A=e.chatConfig,M=void 0===A?{}:A,L=(0,l.useState)(G.MV.DISABLED.value),C=L[0],D=L[1],H=(0,l.useState)([]),I=H[0],R=H[1],z=(0,l.useState)([]),P=z[0],B=z[1],W=(0,l.useState)(!1),Q=W[0],J=W[1],K=(0,l.useState)(!1),Y=K[0],$=K[1],X=(0,l.useState)(!1),ee=X[0],te=X[1],ne=(0,l.useState)(!0),ae=ne[0],re=ne[1],ie=(0,l.useState)(!1),se=ie[0],oe=ie[1],ce=(0,l.useState)(!1),le=ce[0],ue=ce[1],de=(0,l.useState)(),ve=de[0],fe=de[1],me=(0,l.useState)(null),he=me[0],pe=me[1],xe=(0,l.useState)(null),_e=xe[0],ye=xe[1],be=(0,l.useState)(null),ge=be[0],we=be[1],ke=(0,l.useState)(p),je=ke[0],Ne=ke[1],Se=(0,l.useState)(!1),Ze=Se[0],Ee=Se[1],Ae=(0,l.useState)(!0),Me=Ae[0],Le=Ae[1],qe=(0,l.useState)(!0),Ce=qe[0],De=qe[1],He=(0,l.useState)([]),Ie=He[0],Re=He[1],Fe=(0,l.useState)(!0),Ve=Fe[0],Te=Fe[1],Oe=(0,l.useRef)(he);(0,l.useEffect)((function(){Oe.current=he}),[he]);var Ge=function(){return fe(!ve)},Ue=null,ze=(0,l.useRef)(null),Pe=(0,l.useRef)(null),Be=(0,l.useContext)(_.Z),We=(0,T.useRouter)(),Qe=Be.appConfig,Je=e.currentUser||Be.currentUser,Ke=(0,w.useTimer)({autoStart:!1,expiryTimestamp:new Date}),Ye="1"==e.video.ytFlagWeb?(0,Z.NA)(e.video.video_id):e.video.recording_schedule,$e=50,Xe=(0,l.useCallback)((0,a.Z)((function(){var t,n,a,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:if(e.firebase)return we(e.firebase),[2];if(t=We.query.lcId?"[LINKEDCOURSE-".concat(11,"-").concat(We.query.lcId,"]"):"[DEFAULT]",n=Qe.web_firebaseconfig,!We.query.lcId||!(0,b.gG)(t))return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,O.OF)({lcId:We.query.lcId,lcApi:(0,Z.NA)(We.query.api)})];case 2:return n=i.sent(),[3,4];case 3:return a=i.sent(),console.error("Error in getting firebase config",a),Le(!1),[3,4];case 4:try{r=(0,b.G5)(n,t),we(r)}catch(s){console.error("Failed to initialize Firebase:",s),Le(!1)}return[2]}}))})),[e.firebase,We.query.lcId,We.query.api,Qe.web_firebaseconfig]),et=function(e){var t=e.message,n=e.isPinned,a=void 0!==n&&n;return(0,c.jsxs)("div",{className:"chatmsg ".concat(a?"pinned-message":""),children:[(0,c.jsx)("div",{className:"col-md-12 col-xs-12 m-t-10",children:(0,c.jsxs)("div",{className:"messages msg_sent rounded-1 ".concat(a?"border-warning border-2":""),children:[(0,c.jsx)("div",{className:"font-semi-bold",children:(0,c.jsx)(E.Z,{options:{target:"_blank",rel:"noopener noreferrer"},children:(0,y.i5)(t.userComment)})}),(0,c.jsxs)("time",{className:"text-gray font-xs",children:[t.userName," ",(0,c.jsx)("span",{className:"text-gray font-xs",children:(0,V.by)(t.userTime,Number(t.postedAt))}),","]})]})}),(0,c.jsx)("div",{})]})},tt=function(){var e,t,n,a=Pe.current.value,o=(0,y.MI)(a);if(ae&&!(0,g.isEmpty)(null===o||void 0===o?void 0:o.trim())&&!ee)if((null!==(e=M.chatCharacterLimit)&&void 0!==e?e:Qe.web_chatcharacterlimit)>0&&o.trim().length>(null!==(t=M.chatCharacterLimit)&&void 0!==t?t:Qe.web_chatcharacterlimit))k.Am.warn("Only ".concat(null!==(n=M.chatCharacterLimit)&&void 0!==n?n:Qe.web_chatcharacterlimit," are allowed"),{position:"bottom-right"});else if(Ke.isRunning)k.Am.info("You can send the next message after ".concat(Ke.seconds," seconds"));else{if((0,y.$N)(a))return Pe.current.value=o,void k.Am.warn("URLs are not allowed",{position:"bottom-right"});var c={userName:Je.name,userComment:o,userFlag:"0",userTime:(0,y.xv)(),postedAt:(new Date).getTime(),userId:Je.userid,pinstatus:"0"};if(Pe.current.value="",!ge||!Ce){var l=(0,i.Z)((0,r.Z)({},c),{key:"local_".concat(Date.now(),"_").concat(Math.random())});return B((function(e){return(0,s.Z)(e).concat([l])})),void Le(!1)}var u=(0,x.N8)(ge);Ue=(0,x.iH)(u,"/youtubedata/"+Ye),(0,x.VF)(Ue,{}).then((function(e){var t=e.key,n=(0,x.iH)(u,"/youtubedata/"+Ye+"/"+t);(0,x.t8)(n,c),Le(!0),"1"!=M.chatDelay&&"1"!=Qe.web_enablechatdelay||Ke.restart((new Date).setSeconds((new Date).getSeconds()+30))})).catch((function(e){console.error("Failed to send message to Firebase:",e);var t=(0,i.Z)((0,r.Z)({},c),{key:"local_".concat(Date.now(),"_").concat(Math.random())});B((function(e){return(0,s.Z)(e).concat([t])})),Le(!1)}))}},nt=function(){if(J(!1),Oe.current&&ge){var e=Oe.current.key,t=(0,x.N8)(ge),n=(0,x.iH)(t,"/data/handRaise/".concat(Ye,"/users/").concat(e,"/request_status")),a=(0,x.iH)(t,"/data/handRaise/".concat(Ye,"/users/").concat(e,"/room_id")),r=(0,x.iH)(t,"/data/handRaise/".concat(Ye,"/users/").concat(e,"/voice_call_token")),i=(0,x.iH)(t,"/data/handRaise/".concat(Ye,"/current_live_call/").concat(Je.userid));(0,x.t8)(n,"Ended"),(0,x.t8)(a,""),(0,x.t8)(r,""),(0,x.t8)(i,null)}};return(0,l.useEffect)((function(){Xe()}),[Xe]),(0,l.useEffect)((function(){var e=function(){De(!0),Me||(Xe(),setTimeout((function(){if(ge){var e=(0,x.N8)(ge),t=(0,x.iH)(e,"/test_connection");(0,x.t8)(t,{timestamp:Date.now()}).then((function(){(0,x.t8)(t,null),Le(!0)})).catch((function(){Le(!1)}))}}),1e3))},t=function(){De(!1),Le(!1)};return De(navigator.onLine),window.addEventListener("online",e),window.addEventListener("offline",t),function(){window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[Me,Xe]),(0,l.useEffect)((function(){if(ge){var t=(0,x.N8)(ge);Ue=(0,x.iH)(t,"/youtubedata/"+Ye);var n=(0,x.iH)(t,"/data/live_chat_switcher/".concat(Ye)),a=(0,x.IO)(Ue,(0,x.vh)($e)),o=(0,x.iH)(t,"/adminMessages/".concat(Ye));(0,x.Jr)(o,(function(e){var t=e.val();Re((function(n){return"1"==t.pinstatus?(0,s.Z)(n.filter((function(t){return t.key!==e.key}))).concat([(0,i.Z)((0,r.Z)({},t),{key:e.key,pinnedAt:Date.now()})]):n.filter((function(t){return t.key!==e.key}))}))})),(0,x.yv)(o,(function(e){var t=e.val();"1"==t.pinstatus&&Re((function(n){return(0,s.Z)(n).concat([(0,i.Z)((0,r.Z)({},t),{key:e.key,pinnedAt:Date.now()})])}))})),(0,x.MQ)(o,(function(e){Re((function(t){return t.filter((function(t){return t.key!==e.key}))}))})),(0,x.yv)(a,(function(e){var t=(0,i.Z)((0,r.Z)({},e.val()),{key:e.key});B((function(n){return n.some((function(t){return t.key===e.key}))?n:(0,s.Z)(n).concat([t])}))})),(0,x.jM)(n,(function(t){var n=t.val(),a=String(null!==n?n:e.video.chat_status);!Me&&Ce&&Le(!0),"1"==a?(D(je),Ee(!1),B((function(e){if(je===G.MV.SELF.value){var t=e.filter((function(e){return e.userId===Je.userid||"-1"===e.userId}));R(t.slice(-50))}else R(e.slice(-50));return e}))):"2"==a?(D(G.MV.SELF.value),Ee(!0),B((function(e){var t=e.filter((function(e){return e.userId===Je.userid||"-1"===e.userId}));return R(t.slice(-50)),e}))):(D(G.MV.DISABLED.value),Ee(!0),R([]))})),(0,x.MQ)(Ue,(function(e){var t=e.key;B((function(e){return e.filter((function(e){return e.key!==t}))})),R((function(e){return e.filter((function(e){return e.key!==t}))}))}));var c=(0,x.iH)(t,"/data/user_block_status/"+Je.userid),l=(0,x.iH)(t,"/data/handRaise/"+Ye+"/users"),u=(0,x.iH)(t,"/data/handRaise/"+Ye+"/block_users/"+Je.userid),d=(0,x.iH)(t,"/data/handRaise/".concat(Ye,"/is_handraise_disabled")),v=(0,x.iH)(t,"/data/live_quick_polls/"+Ye+"/enable_leaderboard");(0,x.jM)(u,(function(e){var t=e.val();$(1==t)})),(0,x.jM)(d,(function(e){var t=e.val();oe(!0===t)})),(0,x.jM)(c,(function(e){var t=e.val();te(1==t)}));var f=(0,x.iH)(t,"/chat_switcher/"+Ye);return(0,x.jM)(f,(function(e){0==e.val()?(re(!1),k.Am.info("Chat has been disabled")):re(!0)})),Y||ee||((0,x.yv)(l,(function(e){var t=e.val();t.user_id==Je.userid&&("Pending"==t.request_status?(J(!0),pe((0,i.Z)((0,r.Z)({},t),{key:e.key}))):"Accepted"==t.request_status?(pe((0,i.Z)((0,r.Z)({},t),{key:e.key})),J(!0)):"Rejected"==t.request_status||"Blocked"==t.request_status?(J(!1),pe(null),k.Am.info("Hand raise request cancelled by you/admin.")):"Ended"==t.request_status&&(J(!1),pe(null)))})),(0,x.Jr)(l,(function(e){var t=e.val();"Pending"==t.request_status?(J(!0),pe((0,i.Z)((0,r.Z)({},t),{key:e.key}))):t.user_id==Je.userid&&("Accepted"==t.request_status?(J(!0),pe((0,i.Z)((0,r.Z)({},t),{key:e.key}))):"Rejected"==t.request_status||"Blocked"==t.request_status?(J(!1),pe(null),k.Am.info("Hand raise request cancelled by you/admin.")):"Ended"==t.request_status&&(J(!1),pe(null)))}))),(0,x.jM)(v,(function(e){1==e.val()?ue(!0):(fe(!1),ue(!1))})),window.addEventListener("beforeunload",nt),function(){var e;"Pending"==(null===(e=Oe.current)||void 0===e?void 0:e.request_status)&&nt(),(0,x.S1)(Ue,"child_added"),(0,x.S1)(Ue,"child_removed"),(0,x.S1)(a,"child_added"),(0,x.S1)(l,"child_added"),(0,x.S1)(l,"child_changed"),(0,x.S1)(c,"value"),(0,x.S1)(u,"value"),(0,x.S1)(d,"value"),(0,x.S1)(f,"value"),(0,x.S1)(v,"value"),(0,x.S1)(n,"value"),(0,x.S1)(o,"child_added"),(0,x.S1)(o,"child_changed"),(0,x.S1)(o,"child_removed"),J(!1),ue(!1),window.removeEventListener("beforeunload",nt)}}}),[ge]),(0,l.useEffect)((function(){ze.current&&ze.current.scrollTo({top:ze.current.scrollHeight,behavior:"smooth"})}),[I]),(0,l.useEffect)((function(){if(C==G.MV.SELF.value||C==G.MV.DISABLED.value){var e=P.filter((function(e){return e.userId===Je.userid||"-1"===e.userId})).slice(-50);R(e)}else R(P.slice(-50))}),[P,C,Je.userid]),ge?(0,c.jsxs)("div",{id:"chatContainer",className:"panel panel-default h-100 flex flex-col max-h-full",children:[(0,c.jsxs)("div",{className:"panel-heading top-bar font-bold font-lg d-flex text-sm md:text-base py-2 md:py-3",children:[(0,c.jsx)("span",{className:"me-auto title",children:"Chat"}),(0,c.jsxs)("div",{className:"ms-auto",children:[C!==G.MV.DISABLED.value&&(0,c.jsxs)("select",{className:"border-0 me-2 bg-light text-xs md:text-sm",value:C,onChange:function(e){return t=e.target.value,void(Ze||(Ne(t),D(t),B((function(e){if(t===G.MV.SELF.value){var n=e.filter((function(e){return e.userId===Je.userid||"-1"===e.userId}));R(n.slice(-50))}else t===G.MV.ALL.value&&R(e.slice(-50));return e}))));var t},disabled:Ze,children:[(0,c.jsx)("option",{value:G.MV.ALL.value,children:"All Chat"}),(0,c.jsx)("option",{value:G.MV.SELF.value,children:"Self Chat"})]}),!n&&"1"==Qe.web_enablehandraiselive&&!Y&&!se&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u.Z,{color:"link",onClick:Q?function(){return ye("handButton")}:function(){if(!Q&&!Y&&ge&&!n){var e={created_at:(new Date).getTime(),user_id:Je.userid,user_name:Je.name,request_status:"Pending",room_id:"",voice_call_token:""},t=(0,x.N8)(ge);Ue=(0,x.iH)(t,"/data/handRaise/"+Ye+"/users"),(0,x.VF)(Ue,e).then((function(e){J(!0),k.Am.success("Hand raised")}))}},className:Q?"p-0 border-0":"text-reset p-0 border-0",id:"handButton",children:(0,c.jsx)(j.G,{size:"lg",icon:Q?N.ioV:S.ioV})}),(0,c.jsx)(d.Z,{placement:"bottom",target:_e,isOpen:!!_e,toggle:function(){return ye(null)},children:(0,c.jsx)(v.Z,{children:(0,c.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[(0,c.jsx)("p",{className:"mb-2 text-center",children:"Are you sure you want to lower your hand?"}),(0,c.jsxs)("div",{className:"d-flex gap-2",children:[(0,c.jsx)(u.Z,{color:"secondary",size:"sm",onClick:function(){return ye(null)},children:"Cancel"}),(0,c.jsx)(u.Z,{color:"primary",size:"sm",onClick:function(){if(he){var e=(0,x.N8)(ge),t=(0,x.iH)(e,"/data/handRaise/".concat(Ye,"/users/").concat(he.key));null===he.key||void 0===he.key||""===he.key||(0,g.isEmpty)(he.key)||(0,x.Vx)(t,{request_status:"Rejected"}),J(!1),pe(null),ye(null)}},children:"Lower Hand"})]})]})})})]}),le&&(0,c.jsx)(u.Z,{color:"link",onClick:Ge,className:"text-warning p-0 border-0 ms-3",children:(0,c.jsx)(j.G,{size:"lg",icon:N.kWN})}),e.toggleChat&&(0,c.jsx)(u.Z,{color:"link",onClick:e.toggleChat,className:"p-0 float-end ms-3 text-gray border-0 close-btn",children:(0,c.jsx)(j.G,{size:"lg",icon:N.nYk})})]})]}),(0,c.jsxs)("div",{className:"panel-body msg_container_base position-relative flex-grow overflow-y-auto",ref:ze,style:{minHeight:"100px",maxHeight:"100%"},children:[!n&&"Accepted"==(null===he||void 0===he?void 0:he.request_status)&&(null===he||void 0===he?void 0:he.room_id)&&(null===he||void 0===he?void 0:he.voice_call_token)&&(0,c.jsx)("div",{className:"position-sticky pt-2 top-0 start-0 w-100",style:{zIndex:1e3},children:(0,c.jsx)(U,{roomId:he.room_id,token:he.voice_call_token,isDefaultMuted:!0,hasAdminMuted:he.is_admin_muted,onCallEnded:nt})}),(0,c.jsx)(q,{firebase:ge,id:Ye,currentUser:Je}),ve&&(0,c.jsx)(F,{firebase:ge,id:Ye,container:e.leaderboardContainer,toggle:Ge,isOpen:ve,currentUser:Je}),0==I.length&&(C===G.MV.SELF.value?G.MV.SELF.message:G.MV.ALL.message),Ie.length>0&&(0,c.jsxs)("div",{className:"position-sticky top-0 bg-white",style:{zIndex:999},children:[(0,c.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-1 bg-warning bg-opacity-10 px-2 py-1 cursor-pointer",onClick:function(){return Te(!Ve)},style:{cursor:"pointer"},children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)(j.G,{icon:N.RP7,className:"text-warning me-2",size:"sm"}),(0,c.jsxs)("small",{className:"text-warning fw-bold",children:["PINNED MESSAGES (",Ie.length,")"]})]}),(0,c.jsx)(j.G,{icon:Ve?N.mTx:N.ptq,className:"text-warning",size:"sm"})]}),(0,c.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(Ve?"max-h-[150px]":"max-h-0"),children:(0,c.jsx)("div",{className:"overflow-y-auto p-2",style:{maxHeight:"150px"},children:(0,s.Z)(Ie).sort((function(e,t){return t.pinnedAt-e.pinnedAt})).map((function(e){return(0,c.jsx)(et,{message:e,isPinned:!0},e.key)}))})})]}),I.map((function(e,t){return(0,c.jsx)(et,{message:e},e.key)}))]}),(0,c.jsx)("div",{className:"panel-footer mt-auto py-2",children:(0,c.jsxs)(f.Z,{className:"flex flex-row",children:[(0,c.jsx)(m.Z,{innerRef:Pe,type:"text",placeholder:"Write your message here ...",onKeyDown:function(e){"Enter"==e.key&&tt()},name:"typedMessage",id:"typedMessage",className:"mb-0 text-sm md:text-base py-1 md:py-2",disabled:!ae||ee},"typedMessage"),(0,c.jsx)(u.Z,{color:"primary",id:"btn-chat",disabled:!ae||ee,onClick:tt,className:"px-2 md:px-3 py-1 md:py-2 text-sm md:text-base",children:"Send"})]})})]}):null}},62922:function(e,t,n){n.d(t,{AQ:function(){return o},Av:function(){return r},by:function(){return s},vF:function(){return i}});var a=function(e){if(!e)return"00";var t=e>=10?e.toString()[0]:"0",n=e>=10?e.toString()[1]:e.toString();return"".concat(t).concat(n)},r=function(e,t,n){var r=[];return r.push(a(e)),r.push(a(t)),r.push(a(n)),r.join(":")};function i(e){return new Date(e).toDateString()===(new Date).toDateString()?new Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date(e)):new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date(e))}var s=function(e,t){return t?i(t):e?e.toLocaleUpperCase():""},o=function(e,t){return"".concat(a(e),":").concat(a(t))}}}]);