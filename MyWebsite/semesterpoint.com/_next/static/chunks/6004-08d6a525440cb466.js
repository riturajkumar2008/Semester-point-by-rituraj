"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6004],{15322:function(e,n,t){t.d(n,{JU:function(){return u},PC:function(){return o},UU:function(){return h},XG:function(){return p},rV:function(){return a},sR:function(){return c}});var i=t(47568),r=t(97582),s=t(87066),a=function(e,n,t){return s.Z.get("/get/get_items_by_type",{baseURL:e,params:{item_type:n,item_id:t}}).then((function(e){return e.data.data}))},o=function(e){return s.Z.get("/get/get_currency_conversion",{params:{base_currency:"INR",currencies:e},transformRequest:function(e,n){return Object.keys(n).forEach((function(e){delete n[e]})),e}}).then((function(e){return e.data.data}))};function c(e,n,t){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)((function(e,n,t){return(0,r.__generator)(this,(function(i){switch(i.label){case 0:return[4,s.Z.post("https://tempapi.appx.co.in/Livepush/get_schedule_id_by_meetingid",{meeting_id:"",stream_id:e},{headers:{Authorization:n,"User-ID":t}}).then((function(e){return e.data.data}))];case 1:return[2,i.sent()]}}))}))).apply(this,arguments)}function u(e,n,t){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((function(e,n,t){return(0,r.__generator)(this,(function(i){return[2,s.Z.post("https://tempapi.appx.co.in/post/dyte_change_app_status",{meeting_id:e,stream_id:e},{headers:{Authorization:n,"User-ID":t}})]}))}))).apply(this,arguments)}function p(e,n,t){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)((function(e,n,t){return(0,r.__generator)(this,(function(i){return[2,s.Z.post("https://tempapi.appx.co.in/Livepush/endHundredMsStream",{meeting_id:e,stream_id:e},{headers:{Authorization:n,"User-ID":t}})]}))}))).apply(this,arguments)}function h(e,n,t,i,r,s){return _.apply(this,arguments)}function _(){return(_=(0,i.Z)((function(e,n,t,i,a,o){return(0,r.__generator)(this,(function(r){return[2,s.Z.post("".concat(window.location.origin,"/api/update-sheet-data"),{url:e,userid:n,orderid:t,code:i,amount:a},{headers:{Authorization:o,"User-ID":n}})]}))}))).apply(this,arguments)}},32109:function(e,n,t){t.d(n,{$Z:function(){return s},b3:function(){return a},lO:function(){return o},s:function(){return r}});var i=t(87066),r=function(e){var n=e.item_id,t=e.item_type;return i.Z.post("/kyc/initiateAadharEsign",{item_id:n,item_type:t}).then((function(e){return e.data.data}))},s=function(e){var n=e.item_id,t=e.item_type,r=e.pan_number,s=e.name_on_pan,a=e.date_of_birth;return i.Z.post("/kyc/verifyPan",{item_id:n,item_type:t,pan_number:r,name_on_pan:s,date_of_birth:a}).then((function(e){return e.data.data}))},a=function(){return i.Z.get("/kyc/sendOtpForConsent").then((function(e){return e.data.data}))},o=function(e,n,t){return i.Z.post("/kyc/verifyOtpForConsent",{otp:e,item_id:n,item_type:t}).then((function(e){return e.data.data}))}},77585:function(e,n,t){var i=t(85893);n.Z=function(e){var n=e.validity,t=e.validityType,r=void 0===t?"MONTHS":t,s=e.hideTillExam,a=void 0!==s&&s;if(!n||!r||null==n||"100"==n)return null;var o=r.toUpperCase(),c={MONTHS:{single:"Month",plural:"Months"},MONTH:{single:"Month",plural:"Months"},YEAR:{single:"Year",plural:"Years"},YEARS:{single:"Year",plural:"Years"},WEEK:{single:"Week",plural:"Weeks"},WEEKS:{single:"Week",plural:"Weeks"},DAY:{single:"Day",plural:"Days"},DAYS:{single:"Day",plural:"Days"}};return(0,i.jsxs)("h6",{children:["Validity :"," ",!a&&("2"==n&&"YEARS"==o||"24"==n&&"MONTHS"==o)?"Till Exam":"".concat(n," ").concat(Number(n)>1?c[o].plural:c[o].single)]})}},56004:function(e,n,t){t.d(n,{Z:function(){return he}});var i=t(47568),r=t(828),s=t(29815),a=t(97582),o=t(85893),c=t(59417),l=t(67814),u=t(47041),d=t(96486),p=t(11163),m=t(67294),h=t(91444),_=t(35773),f=t(95305),g=t(87261),y=t(84082),v=t(47628),x=t(89885),b=t(96076),j=t(50526),w=t(26683),Z=t(83024),N=t(60766),P=t(23149),k=t(16407);function S(e){var n=e.product,t=e.isOpen,i=e.toggle,r=e.onBuyNow,s=(e.studyMaterialSelected,e.setStudyMaterialSelected,e.isLoading),a=n.study_material_id>0?n.study_material:n.book;return(0,o.jsx)("div",{children:(0,o.jsxs)(w.Z,{isOpen:t,toggle:i,children:[(0,o.jsx)(Z.Z,{children:"Get Special discount on book(s)"}),(0,o.jsxs)(N.Z,{children:[(0,o.jsx)("img",{src:a.image||"/empty-image-web.svg",style:{height:"200px",borderRadius:"4px"},className:"".concat((0,d.isEmpty)(a.image)?"img-cover":""," mb-3 w-100"),alt:a.title}),(0,o.jsx)("h1",{className:"text-xl",children:a.title}),(0,o.jsx)("h5",{children:(0,o.jsx)(k.Z,{price:a.price,mrp:a.mrp,currency:a.currency})})]}),(0,o.jsxs)(P.Z,{className:"d-flex justify-content-between",children:[(0,o.jsxs)(y.Z,{className:"border",color:"light",onClick:function(){return r()},children:["Skip",s&&(0,o.jsx)(l.G,{icon:c.LM3,spin:!0})]}),(0,o.jsxs)(y.Z,{color:"primary",onClick:function(){return r(a)},children:["Add ",s&&(0,o.jsx)(l.G,{icon:c.LM3,spin:!0})]})]})]})})}var E=t(26042),C=t(97603);function A(e){var n=e.product,t=e.isOpen,i=e.toggle,r=e.onBuyNow,s=e.couponCode,a=e.setCouponCode,u=e.isLoading,p=e.studyMaterialSelected,m=e.selectedInstallments,h=e.selectedSubscriptionPlan,_=e.creditsApplied,f=e.setCreditsApplied,g=e.setFinalPrice,v=e.currency,x=e.setCurrency,b=e.exchangeRates,j=e.selectedPlan,Z=e.testPass,k=e.isEmiSelected,S=e.isLinkedCourse,A=e.isTestPass;return(0,o.jsx)("div",{children:(0,o.jsxs)(w.Z,{isOpen:t,toggle:i,scrollable:!0,size:"lg",children:[(0,o.jsxs)("div",{style:(0,E.Z)({position:"relative",overflow:"hidden",height:"250px"},!n.image&&{backgroundColor:"gray"}),children:[n.image&&(0,o.jsx)("div",{style:{position:"absolute",inset:0,backgroundImage:"url(".concat(n.image||"/empty-image-web.svg",")"),backgroundSize:"cover",backgroundPosition:"center",filter:"blur(8px)",transform:"scale(1.1)"}}),(0,o.jsx)("img",{src:n.image||"/empty-image-web.svg",style:{position:"relative",maxHeight:"250px",borderRadius:"4px",objectFit:"contain",display:"block",margin:"0 auto",width:"100%"},className:(0,d.isEmpty)(n.image)?"img-cover":"",alt:n.title})]}),(0,o.jsxs)(N.Z,{children:[(0,o.jsx)("h1",{className:"text-xl",children:n.title}),(0,o.jsx)(C.Z,{product:n,couponCode:s,setCouponCode:a,setFinalPrice:g,currency:v,exchangeRates:b,setCurrency:x,selectedSubscriptionPlan:h,studyMaterialSelected:p,creditsApplied:_,setCreditsApplied:f,selectedInstallments:m,selectedPlan:j,testPass:Z,autoApplyCoupon:!0,isLinkedCourse:S,isTestPass:A})]}),(0,o.jsx)(P.Z,{children:(0,o.jsxs)(y.Z,{color:"primary",onClick:function(){return r(k)},block:!0,children:["Buy now ",u&&(0,o.jsx)(l.G,{icon:c.LM3,spin:!0})]})})]})})}var I=t(39886),O=t(54610),T=t(80135);function M(e){var n=e.product,t=e.isOpen,r=e.toggle,u=e.onBuyNow,p=e.isLoading,_=e.selectedInstallments,f=e.setSelectedInstallments,g=n.installmentPlans,v=(0,m.useContext)(x.Z).appConfig,b=function(){var e=(0,i.Z)((function(){var e,n,t,i;return(0,a.__generator)(this,(function(r){if(_.length<1)return h.Am.error("Please select an installment to pay"),[2];if(e=g.filter((function(e){return 0===e.ins_ispaid})).map((function(e){return e.ins_no})),n=(0,s.Z)(_).sort((function(e,n){return e-n})),t=(0,s.Z)(e).sort((function(e,n){return e-n})),n[0]!==t[0])return h.Am.error("You must pay earlier installments first"),[2];for(i=0;i<n.length;i++)if(n[i]!==t[i])return h.Am.error("You can't skip installments. Please select all unpaid installments up to your last selection."),[2];return u(!0),[2]}))}));return function(){return e.apply(this,arguments)}}(),j=function(e){return _.includes(e.ins_no)?"primary":"1"==e.ins_canselect?"primary-light":"1"==e.ins_ispaid?"success":"white"};return(0,o.jsx)("div",{children:(0,o.jsxs)(w.Z,{isOpen:t,toggle:r,children:[(0,o.jsx)("img",{src:n.image||"/empty-image-web.svg",style:{height:"200px",borderRadius:"4px"},className:(0,d.isEmpty)(n.image)?"img-cover":"",alt:n.title}),(0,o.jsxs)(N.Z,{children:[(0,o.jsx)("h1",{className:"text-xl",children:n.title}),(0,o.jsx)("div",{className:"font-semi-bold mb-2",children:"Installments"}),null===g||void 0===g?void 0:g.map((function(e,n){var t;return(0,o.jsx)(I.Z,{className:"mb-3",color:j(e),onClick:function(n){_.includes(e.ins_no)?f(_.filter((function(n){return n!=e.ins_no}))):f((0,s.Z)(_).concat([e.ins_no]))},children:(0,o.jsxs)(O.Z,{className:"d-flex align-items-center lh-sm",children:[(0,o.jsx)("div",{className:"me-3",children:(0,o.jsx)(l.G,{icon:c.On6})}),(0,o.jsxs)("div",{children:["Installment No: ",e.ins_no,(0,o.jsxs)("div",{children:["Price:"," ",(0,o.jsx)(k.Z,{price:e.ins_price,mrp:e.ins_price,currency:e.currency})]}),(0,o.jsxs)("div",{className:"sub-text",children:["Validity:"," ",n===(null===g||void 0===g?void 0:g.length)-1?T.J.LAST_EMI_VALIDITY:(0,o.jsxs)(o.Fragment,{children:[e.ins_validity," ",null===(t=e.ins_validity_type)||void 0===t?void 0:t.toLowerCase()]})]})]})]})},e.ins_no)})),(0,o.jsxs)(y.Z,{color:"primary",className:"mt-4",onClick:b,block:!0,children:[p&&(0,o.jsx)(l.G,{icon:c.LM3,spin:!0,className:"ms-2"}),"1"==v.web_enablecart?"Add to Cart":"Buy now"]})]})]})})}var L=t(41664),D=t.n(L);function R(e){var n=e.isOpen,t=e.toggle,i=e.pricingPlans,r=e.selectedPlan,s=e.setSelectedPlan,a=e.onBuyNow,c=e.couponResponse,l=(0,m.useState)(),u=l[0],p=l[1],h=(0,m.useContext)(x.Z).appConfig;(0,m.useEffect)((function(){return function(){p()}}),[]);var _=function(e,n){var t="INR"==n;if(c){if(c.minimum_order_value>0&&e<c.minimum_order_value)return e;var i=c.percent_off>0?e*c.percent_off/100:c.flat_price;return c.maxdiscount>0&&i>c.maxdiscount&&(i=c.maxdiscount),t?Math.round(e-i):e-i}return e};return(0,o.jsxs)(w.Z,{isOpen:n,centered:!0,toggle:t,children:[(0,o.jsx)(Z.Z,{toggle:t,children:"Select a Pricing Plan"}),(0,o.jsxs)(N.Z,{className:"text-center",children:[i.map((function(e){return(0,o.jsx)(I.Z,{className:"mb-3",onClick:function(n){return s(e)},color:e.id==(null===r||void 0===r?void 0:r.id)?"primary-light":"white",children:(0,o.jsxs)(O.Z,{className:"d-flex justify-content-center font-bold ",children:["100"===e.validity?"Lifetime":(0,o.jsxs)("div",{children:[e.validity," ".concat(e.validity_type.toLowerCase())]}),"-",(0,o.jsxs)("span",{className:"ms-2 ",children:[(0,o.jsx)(k.Z,{price:_(e.price,e.currency),mrp:e.mrp,currency:e.currency})," "]})," "]})},e.id)})),!(0,d.isEmpty)(u)&&(0,o.jsx)("div",{className:"text-danger",children:u}),(0,o.jsx)(y.Z,{color:"primary",className:"mt-5",onClick:function(){(0,d.isEmpty)(r)?p("Select a plan to proceed"):a()},block:!0,children:"1"==h.web_enablecart?"Add to Cart":"Buy now"})]})]})}var B=t(22490),Y=t(77585);function q(e){var n=e.isOpen,t=e.toggle,i=e.subscriptionPlans,r=e.selectedPlan,s=e.onPlanSelected,a=(0,m.useState)(r),c=a[0],l=a[1],u=(0,m.useContext)(x.Z).appConfig,d=(0,m.useMemo)((function(){return!!u&&(0,B.h)(u.web_showPreciseDiscount)}),[r]);return(0,m.useEffect)((function(){return l(r),function(){l(null)}}),[r]),(0,o.jsxs)(w.Z,{isOpen:n,centered:!0,toggle:t,children:[(0,o.jsx)(Z.Z,{toggle:t,children:"Select a Subscription Plan"}),(0,o.jsx)(N.Z,{className:"text-center d-flex flex-column gap-3",children:i.map((function(e){return(0,o.jsx)(I.Z,{onClick:function(){return l(n=e),void s(n);var n},color:e.id==(null===c||void 0===c?void 0:c.id)?"primary-light":"white",role:"button",children:(0,o.jsxs)(O.Z,{className:"d-flex flex-column justify-content-center p-3",children:[(0,o.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,o.jsx)("div",{className:"font-lg text-primary font-bold",children:e.name}),(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:"font-sm rounded-1 align-items-center px-2 bg-primary font-primary mb-0",children:(0,o.jsx)(Y.Z,{validity:e.validity,validityType:e.validity_type,hideTillExam:!0})})})]}),(0,o.jsx)("div",{className:"d-flex",children:(0,o.jsx)(k.Z,{price:e.price,mrp:e.mrp,showPreciseDiscount:d,currency:e.currency})})]})},e.id)}))})]})}var F=t(62380),G=t(73716),z=t(15322),H=t(89163),U=t(3126);function K(e){var n=e.product,t=e.isOpen,i=e.toggle,r=e.onPaymentSuccess,s=e.isLoading,a=(0,m.useContext)(x.Z).appConfig,u=(0,m.useState)("INITIAL"),p=u[0],_=u[1],f=(0,m.useState)(),b=f[0],j=f[1],k=(0,m.useState)(),S=k[0],E=k[1],C=(0,m.useState)(""),A=C[0],I=C[1];return(0,o.jsx)("div",{children:(0,o.jsxs)(w.Z,{isOpen:t,toggle:i,children:[(0,o.jsx)(Z.Z,{className:"border-0 pb-0",toggle:i}),(0,o.jsx)(N.Z,{children:"BROKER_DETAILS"==p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"Select Broker Name"}),a.web_brokernames&&a.web_brokernames.split(",").length>1?(0,o.jsxs)(g.Z,{type:"select",onChange:function(e){return j(e.target.value)},children:[(0,o.jsx)("option",{children:"--Choose an Option--"}),a.web_brokernames.split(",").map((function(e){return(0,o.jsx)("option",{children:e},e)}))]}):(0,o.jsxs)(g.Z,{type:"select",onChange:function(e){return j(e.target.value)},children:[(0,o.jsx)("option",{children:"--Choose an Option--"}),(0,o.jsx)("option",{children:"Zerodha"}),(0,o.jsx)("option",{children:"Upstox"}),(0,o.jsx)("option",{children:"Angel One"}),(0,o.jsx)("option",{children:"Dhan"}),(0,o.jsx)("option",{children:"Delta Exchange"}),(0,o.jsx)("option",{children:"WinproFx"}),(0,o.jsx)("option",{children:"Exness"}),(0,o.jsx)("option",{children:"XM"})]})]}),(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"What is your Broker ID"}),(0,o.jsx)(g.Z,{type:"text",placeholder:"Broker ID",onChange:function(e){return E(e.target.value)}})]}),A&&(0,o.jsxs)("div",{children:[(0,o.jsx)("small",{className:"text-danger mr-2",children:A}),(0,o.jsx)("a",{href:a.web_broker_redirect_url,target:"_blank",rel:"noopener noreferrer",children:"Register Now"})]})]}):(0,o.jsxs)("h5",{children:["Have you opened account using ",a.web_clientname," Code and trading actively in it?"]})}),(0,o.jsx)(P.Z,{className:"d-flex justify-content-center",children:"INITIAL"==p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y.Z,{className:"border",color:"light",onClick:function(){var e=a.web_broker_redirect_url;(0,d.isEmpty)(e)?h.Am.error("Broker redirect URL is not set"):window.open(e,"_blank")},children:"No"}),(0,o.jsx)(y.Z,{color:"primary",onClick:function(){return _("BROKER_DETAILS")},children:"Yes"})]}):(0,o.jsxs)(y.Z,{color:"primary",onClick:function(){var e={item_type:n.itemType,item_id:n.itemId,broker_id:S,broker_type:b};(0,v.nf)(e).then((function(e){h.Am.success("Purchase added successfully"),i(),r()})).catch((function(e){h.Am.error(e.response.data.message),"Invalid Broker id"==e.response.data.message?I("You are not registered. Click now and get registered"):I(e.response.data.message)}))},children:["Submit ",s&&(0,o.jsx)(l.G,{icon:c.LM3,spin:!0})]})})]})})}var V=t(20118),W=t(48583),J=t(79535),$=t(4298),Q=t.n($);function X(e){var n=e.testPass,t=e.isOpen,i=e.toggle,r=e.onAdd,s=e.isLoading;return(0,o.jsx)("div",{children:(0,o.jsxs)(w.Z,{isOpen:t,toggle:i,children:[(0,o.jsx)(Z.Z,{children:"Add Test Pass Subscription"}),(0,o.jsxs)(N.Z,{children:[(0,o.jsx)("img",{src:n.course_thumbnail||"/empty-image-web.svg",style:{height:"200px",borderRadius:"4px"},className:"".concat((0,d.isEmpty)(n.course_thumbnail)?"img-cover":""," mb-3 w-100"),alt:"course cover"}),(0,o.jsx)("h5",{children:(0,o.jsx)(k.Z,{price:n.price,mrp:n.mrp,currency:n.currency})})]}),(0,o.jsxs)(P.Z,{className:"d-flex justify-content-between",children:[(0,o.jsxs)(y.Z,{className:"border",color:"light",onClick:function(){return r("0")},children:["Skip",s&&(0,o.jsx)(l.G,{icon:c.LM3,spin:!0})]}),(0,o.jsxs)(y.Z,{color:"primary",onClick:function(){return r("1")},children:["Add ",s&&(0,o.jsx)(l.G,{icon:c.LM3,spin:!0})]})]})]})})}var ee=t(7386);function ne(e){var n=e.isOpen,t=e.toggle,i=e.isLoading,r=e.onProceed;return(0,o.jsxs)(w.Z,{centered:!0,isOpen:n,toggle:t,scrollable:!0,children:[(0,o.jsx)(Z.Z,{toggle:t,children:"Aadhar Esign"}),(0,o.jsx)(N.Z,{children:(0,o.jsxs)("div",{className:"text-start px-3",children:[(0,o.jsx)("p",{children:"As per the SEBI regulations, Aadhar e-signing is required to start service, ensuring:"}),(0,o.jsxs)("ul",{className:"list-unstyled",children:[(0,o.jsx)("li",{children:"\u2705 Clear agreement with the analyst."}),(0,o.jsx)("li",{children:"\u2705 Transparent service details."}),(0,o.jsx)("li",{children:"\ud83d\udca1 Your details are fully secure."}),(0,o.jsx)("li",{children:"\ud83d\udc47 Click below to e-sign and start premium services!"})]}),(0,o.jsxs)(y.Z,{color:"primary",onClick:r,block:!0,children:[i&&(0,o.jsx)(l.G,{icon:c.LM3,className:"me-2",spin:!0}),(0,o.jsx)("span",{children:"OK! Proceed"})]})]})})]})}var te=t(10596),ie=t(23138),re=t(3751),se=t(32109),ae=t(17399);function oe(e){var n=e.isOpen,t=e.toggle,i=e.product,r=e.onVerifyOtp,s=e.isLoading,a=(0,m.useContext)(x.Z).currentUser,u=(0,m.useState)({otp:""}),d=u[0],p=u[1],_=(0,m.useState)(""),f=_[0],v=_[1],b=(0,m.useState)(!1),j=b[0],Z=b[1],P=(0,m.useMemo)((function(){return(null===a||void 0===a?void 0:a.email)?"We\u2019ve sent an OTP to your registered email: ".concat(null===a||void 0===a?void 0:a.email):"We\u2019ve sent an OTP to your registered email"}),[null===a||void 0===a?void 0:a.email]),k=(0,m.useMemo)((function(){return(null===a||void 0===a?void 0:a.email)?"We\u2019ve re-sent an OTP to your registered email: ".concat(null===a||void 0===a?void 0:a.email):"We\u2019ve re-sent an OTP to your registered email"}),[null===a||void 0===a?void 0:a.email]),S=(0,m.useState)(!1),E=S[0],C=S[1],A=(0,m.useState)(P),I=A[0],O=A[1],T=(0,re.useTimer)({autoStart:!0,expiryTimestamp:new Date((new Date).getTime()+3e5),onExpire:function(){C(!0)}}),M=function(){p({otp:""}),(0,se.lO)(f,i.itemId,i.itemType).then((function(e){if(200===e.status)h.Am.success("OTP verified successfully."),r();else{var n,t,i=(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||(null===e||void 0===e?void 0:e.message);p({otp:i})}})).catch((function(e){var n,t,i=(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||(null===e||void 0===e?void 0:e.message);p({otp:i})}))};return(0,m.useEffect)((function(){n&&a&&(0,se.b3)().then((function(){Z(!0)}))}),[n,a]),(0,o.jsx)("div",{children:(0,o.jsx)(w.Z,{centered:!0,isOpen:n,toggle:t,children:(0,o.jsx)(N.Z,{children:(0,o.jsxs)("div",{children:[(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"Enter OTP"}),(0,o.jsx)(g.Z,{type:"text",placeholder:"Enter OTP",value:f,onChange:function(e){return v(e.target.value)},onKeyPress:function(e){return"Enter"==e.key&&M()},invalid:!!d.otp,name:"otp"}),d.otp&&(0,o.jsx)("small",{className:"text-danger",children:d.otp})]}),j&&(0,o.jsx)(ie.Z,{color:"success",isOpen:!0,children:I}),(0,o.jsxs)("div",{className:"text-center px-5 py-3",children:[(0,o.jsxs)(y.Z,{color:"primary",block:!0,className:"mb-2",disabled:s,onClick:M,children:["Submit",s&&(0,o.jsx)(l.G,{icon:c.LM3,spin:!0})]}),E?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(y.Z,{className:"mb-2",disabled:!E,onClick:function(){return(0,se.b3)().then((function(){Z(!0),O(k)})).catch((function(e){console.error(e),p({otp:e.message})})),O(k),T.restart(new Date((new Date).getTime()+3e4)),void C(!1)},color:"default border",block:!0,children:"Resend"})}):(0,o.jsx)("div",{className:"sub-text",children:" Request new OTP in ".concat((0,ae.SB)(T.minutes)," minutes ").concat((0,ae.SB)(T.seconds)," seconds")})]})]})})})})}var ce=t(14924),le=t(69396),ue=t(56960);function de(e){var n=e.isOpen,t=e.toggle,r=e.onBuyNow,s=e.product,c=((0,u.getCookie)(b.z1),(null===s||void 0===s?void 0:s.exam_center)?null===s||void 0===s?void 0:s.exam_center.split(",").map((function(e){return e.trim()})).filter(Boolean):[]),l=(0,m.useState)({name:"",father_name:"",email:"",phone:"",exam_center:"",state:"",district:"",address:""}),d=l[0],p=l[1],_=(0,m.useState)({}),f=_[0],v=_[1],x=function(e){var n=e.target,t=n.name,i=n.value;p((function(e){return(0,le.Z)((0,E.Z)({},e),(0,ce.Z)({},t,i))})),f[t]&&v((function(e){return(0,le.Z)((0,E.Z)({},e),(0,ce.Z)({},t,""))}))},j=function(){var e=(0,i.Z)((function(){var e,n;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:if(!function(){var e={};return d.name.trim()||(e.name="Name is required"),d.father_name.trim()||(e.father_name="Father name is required"),d.email.trim()?(0,G.vV)(d.email)||(e.email="Enter a valid email"):e.email="Email is required",d.phone.trim()?(0,G.n6)(d.phone)||(e.phone="Enter a valid phone number"):e.phone="Phone number is required",c.length>=1&&!d.exam_center&&(e.exam_center="Please select an exam center"),d.state.trim()||(e.state="State is required"),d.district.trim()||(e.district="District is required"),d.address.trim()||(e.address="Address is required"),v(e),0===Object.keys(e).length}())return[2];i.label=1;case 1:return i.trys.push([1,6,,7]),[4,(0,ee.Lq)(null===s||void 0===s?void 0:s.id,d)];case 2:return 200!=(null===(e=i.sent())||void 0===e?void 0:e.status)?[3,4]:[4,r()];case 3:return i.sent(),p({name:"",father_name:"",email:"",phone:"",exam_center:"",state:"",district:"",address:""}),v({}),t(),[3,5];case 4:h.Am.error("Something went wrong. Please try again."),i.label=5;case 5:return[3,7];case 6:return n=i.sent(),console.error(n),h.Am.error("Network error. Please try again."),[3,7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,o.jsxs)(w.Z,{isOpen:n,toggle:t,className:"rounded-3",scrollable:!0,children:[(0,o.jsx)(Z.Z,{toggle:t,children:"Offline Test"}),(0,o.jsxs)(N.Z,{children:[(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"Name"}),(0,o.jsx)(g.Z,{type:"text",name:"name",value:d.name,onChange:x,invalid:!!f.name}),(0,o.jsx)(ue.Z,{children:f.name})]}),(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"Father Name"}),(0,o.jsx)(g.Z,{type:"text",name:"father_name",value:d.father_name,onChange:x,invalid:!!f.father_name}),(0,o.jsx)(ue.Z,{children:f.father_name})]}),(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"Email"}),(0,o.jsx)(g.Z,{type:"email",name:"email",value:d.email,onChange:x,invalid:!!f.email}),(0,o.jsx)(ue.Z,{children:f.email})]}),(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"Phone"}),(0,o.jsx)(g.Z,{type:"text",name:"phone",value:d.phone,onChange:x,invalid:!!f.phone}),(0,o.jsx)(ue.Z,{children:f.phone})]}),c.length>=1&&(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"Exam Center"}),(0,o.jsxs)(g.Z,{type:"select",name:"exam_center",value:d.exam_center,onChange:x,invalid:!!f.exam_center,children:[(0,o.jsx)("option",{value:"",children:"Select"}),c.map((function(e,n){return(0,o.jsx)("option",{value:e,children:e},n)}))]}),(0,o.jsx)(ue.Z,{children:f.exam_center})]}),(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"State"}),(0,o.jsxs)(g.Z,{type:"select",name:"state",value:d.state,onChange:x,invalid:!!f.state,children:[(0,o.jsx)("option",{value:"",children:"Select state"}),b.PO.map((function(e){return(0,o.jsx)("option",{value:e,children:e},e)}))]}),(0,o.jsx)(ue.Z,{children:f.state})]}),(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"District"}),(0,o.jsx)(g.Z,{type:"text",name:"district",value:d.district,onChange:x,invalid:!!f.district}),(0,o.jsx)(ue.Z,{children:f.district})]}),(0,o.jsxs)(H.Z,{children:[(0,o.jsx)(U.Z,{children:"Address"}),(0,o.jsx)(g.Z,{type:"text",name:"address",value:d.address,onChange:x,invalid:!!f.address,rows:3}),(0,o.jsx)(ue.Z,{children:f.address})]}),(0,o.jsx)("div",{className:"flex items-center justify-center w-full mt-3 gap-x-3",children:(0,o.jsx)(y.Z,{color:"primary",onClick:j,children:"Proceed Payment"})})]})]})}var pe=b.Hg;function me(e,n){var t,w,Z,N,P,k,E,C,I=e.product,O=e.onBeforePurchase,T=e.hideCurrencySelect,L=e.postPurchaseLink,Y=void 0===L?"/purchases":L,H=e.disableCouponModal,U=void 0!==H&&H,$=e.btnColor,ie=void 0===$?"primary":$,re=e.isExtend,ae=e.couponResponse,ce=e.paymentPageId,le=e.isTestPass,ue=void 0!==le&&le,me=e.skipAddToCart,he=void 0!==me&&me,_e=e.isLinkedCourse,fe=e.disableBuyButton,ge=void 0!==fe&&fe,ye=(0,m.useContext)(x.Z),ve=ye.hasSession,xe=ye.setHasSession,be=ye.toggleAuthModal,je=ye.setIsLogin,we=ye.setIsPayment,Ze=ye.currentUser,Ne=ye.appConfig,Pe=ye.lastTestPassCheck,ke=ye.isTestPassPurchased,Se=ye.setIsTestPassPurchased,Ee=(0,p.useRouter)(),Ce=(0,m.useRef)(!1),Ae=(0,m.useRef)(!1),Ie=(0,m.useState)(!1),Oe=Ie[0],Te=Ie[1],Me=(0,m.useState)(),Le=Me[0],De=Me[1],Re=(0,m.useState)(null!==(k=e.couponCode)&&void 0!==k?k:""),Be=Re[0],Ye=Re[1],qe=(0,m.useState)(e.addressDetails||{}),Fe=qe[0],Ge=qe[1],ze=(0,m.useState)({}),He=ze[0],Ue=ze[1],Ke=(0,m.useState)(e.selectedPlan),Ve=Ke[0],We=Ke[1],Je=(0,m.useState)(),$e=Je[0],Qe=Je[1],Xe=(0,m.useState)(),en=Xe[0],nn=Xe[1],tn=(0,m.useState)(),rn=tn[0],sn=tn[1],an=(0,m.useState)(e.creditsApplied),on=an[0],cn=an[1],ln=(0,m.useState)(!1),un=ln[0],dn=ln[1],pn=(0,m.useState)(!1),mn=pn[0],hn=pn[1],_n=(0,m.useState)(!1),fn=_n[0],gn=_n[1],yn=(0,m.useState)(e.currency||"INR"),vn=yn[0],xn=yn[1],bn=(0,m.useState)(!1),jn=bn[0],wn=bn[1],Zn=(0,r.Z)((0,W.KO)(V.c),2),Nn=Zn[0],Pn=Zn[1],kn=Nn.some((function(e){return e.id===I.id})),Sn=(0,m.useState)(),En=Sn[0],Cn=Sn[1],An=(0,m.useState)(),In=An[0],On=An[1],Tn=(0,m.useState)(),Mn=Tn[0],Ln=Tn[1],Dn=(0,m.useState)(!(0,d.isEmpty)(e.selectedInstallments)),Rn=Dn[0],Bn=Dn[1],Yn=(0,m.useState)(e.studyMaterialSelected),qn=Yn[0],Fn=Yn[1],Gn=(0,m.useState)(e.selectedInstallments||[]),zn=Gn[0],Hn=Gn[1],Un=(0,m.useState)(!1),Kn=Un[0],Vn=Un[1],Wn=(0,m.useState)(!1),Jn=Wn[0],$n=Wn[1],Qn=(0,m.useState)(!1),Xn=Qn[0],et=Qn[1],nt=(0,m.useState)(!1),tt=nt[0],it=nt[1],rt=(0,m.useState)(null),st=rt[0],at=rt[1],ot=(0,m.useState)(!1),ct=ot[0],lt=ot[1],ut=(0,m.useState)(e.finalPrice||I.price),dt=ut[0],pt=ut[1],mt=(0,m.useState)({}),ht=mt[0],_t=mt[1],ft=(0,m.useState)(),gt=ft[0],yt=ft[1],vt=(0,m.useState)(),xt=vt[0],bt=vt[1],jt=(0,m.useState)(!1),wt=jt[0],Zt=jt[1],Nt=function(){return Zt(!wt)},Pt=(0,m.useMemo)((function(){return(0,B.h)(Ne.web_showSeparateBuyAndAddToCart)}),[Ne.web_showSeparateBuyAndAddToCart]),kt=(0,m.useMemo)((function(){return!!Rn&&I.installmentPlans.some((function(e){return"1"==e.ins_ispaid}))}),[I.installmentPlans,Rn]),St=(0,m.useMemo)((function(){return(0,d.some)(Ne.web_menuitems,{type:"TEST_PASS"})}),[Ne.web_menuitems]),Et=(0,m.useMemo)((function(){return(0,B.h)(Ne.web_testpasscompulsory)}),[Ne.web_testpasscompulsory]),Ct=(0,m.useMemo)((function(){return(0,B.h)(null===I||void 0===I?void 0:I.is_sebi_flow_enabled)}),[null===I||void 0===I?void 0:I.is_sebi_flow_enabled]),At=(0,m.useMemo)((function(){var e,n,t=null!==(n=null===I||void 0===I||null===(e=I.sebi_details)||void 0===e?void 0:e.consent_type)&&void 0!==n?n:b.ng.NONE;return!(!Ct||t!==b.ng.AADHAAR_ESIGN)}),[Ct,null===I||void 0===I||null===(t=I.sebi_details)||void 0===t?void 0:t.consent_type]),It=(0,m.useMemo)((function(){var e;return null!==(E=null===I||void 0===I||null===(e=I.sebi_details)||void 0===e?void 0:e.pan_verification_mode)&&void 0!==E?E:b.Qi.NONE}),[null===I||void 0===I||null===(w=I.sebi_details)||void 0===w?void 0:w.pan_verification_mode]),Ot=(0,m.useMemo)((function(){var e;return null!==(C=null===I||void 0===I||null===(e=I.sebi_details)||void 0===e?void 0:e.consent_type)&&void 0!==C?C:b.ng.NONE}),[null===I||void 0===I||null===(Z=I.sebi_details)||void 0===Z?void 0:Z.consent_type]),Tt=(0,m.useMemo)((function(){return ke||(0,B.h)(null===xt||void 0===xt?void 0:xt.is_paid)}),[xt,ke]),Mt=(0,m.useMemo)((function(){return(0,B.h)(I.enable_international_pricing)}),[I.enable_international_pricing]),Lt=(0,m.useMemo)((function(){return(0,B.h)(Ne.web_enableinternationalpayments)}),[Ne.web_enableinternationalpayments]),Dt=(0,m.useMemo)((function(){return!Mt&&Lt}),[Mt,Lt]),Rt=(0,m.useMemo)((function(){var e=Ne.web_buyNowButtonName||"Buy Now";return re?e="Extend purchase":I.price<0&&(e="Join Now"),I.is_paid&&"0"!=I.status&&5==I.itemType&&(e="Buy Again"),"1"==I.is_out_of_stock?e="Out of Stock":Pt||"1"!=Ne.web_enablecart||ue||he||(e=kn?"Item added to cart":"Add to Cart"),e}),[re,I.price,Ne.web_buyNowButtonName,I.is_out_of_stock,Pt,Ne.web_enablecart,ue,he,kn]),Bt=(0,m.useMemo)((function(){if(!Pt)return"";var e="";return"1"!=Ne.web_enablecart||ue||he||(e=kn?"Item added to cart":"Add to Cart"),e}),[kn,ue,he,Ne.web_enablecart,Pt]),Yt=function(){return Vn(!Kn)},qt=function(){return $n(!Jn)},Ft=!(0,B.h)(Ne.web_hideTestPassPopup),Gt=function(){et((function(e){return!e}))},zt=function(){Qe(!$e),0==$e&&Ue({})},Ht=function(){return sn(!rn)},Ut=function(){nn((function(e){return e&&(0,B.h)(Ne.web_enablePaymentInitiatedLead)&&ai(b.$t.PAYMENT_INITIATED.label),!e}))},Kt=function(){De((function(e){return e&&(0,B.h)(Ne.web_enablePaymentInitiatedLead)&&ai(b.$t.PAYMENT_INITIATED.label),!e}))},Vt=function(){return Cn(!En)},Wt=function(){return it(!tt)},Jt=function(e){dn("boolean"===typeof e?e:function(e){return!e})},$t=function(e){hn("boolean"===typeof e?e:function(e){return!e})},Qt=function(e){gn("boolean"===typeof e?e:function(e){return!e})};(0,m.useEffect)((function(){ve&&ct&&("0"==I.is_paid&&ei(),lt(!1)),Mt&&xn(I.currency)}),[I]),(0,m.useEffect)((function(){"1"!=Ne.web_enablecart||1!=Le||ue||he||!Oe||(De(!1),Xt())}),[Le]);var Xt=function(){if(kn)h.Am.error((0,o.jsxs)("div",{children:["Item already in cart"," ",(0,o.jsx)(D(),{href:"/cart",children:(0,o.jsx)("a",{className:"p-2 font-sm text-reset",children:"View Cart"})})]}));else{var e=_e&&I.linked_price_kicker?I.linked_price_kicker:I.priceKicker,n=Number(e)>0?Number(I.price)*Number(e)/100:0;I.uhs_price=Number(I.uhs_price),I.uhs_price>0&&(n=Number(n)+Number(I.uhs_price));var t={id:I.id,title:I.title,image:I.image,itemid:I.itemId,itemtype:I.itemType,price:I.price,handlingFees:n,upsell_items:"",upsell_prices:"",currency:vn};if(qn&&(t.price=Number(I.price)+Number(qn.price)),(null===zn||void 0===zn?void 0:zn.length)>0){var i=I.installmentPlans.filter((function(e){return zn.includes(e.ins_no)})).map((function(e){return Number(e.ins_price)}));I.price=(0,d.sum)(i)}(0,d.isEmpty)(Ve)||(t.pricing_plan_id=Ve.id),Rn&&!(0,d.isEmpty)(zn)&&(t.installment_no=zn.join(",")),I.study_material_id>0&&"0"==I.study_material_compulsory&&!(0,d.isEmpty)(qn)?t.is_studymaterial_selected="1":(I.book_id>0&&"0"==I.book_compulsory&&!(0,d.isEmpty)(qn)||I.book_id>0&&"1"==I.book_compulsory&&!kt)&&(t.is_book_selected="1"),In&&(t.is_testpass_selected=In),Pn((0,s.Z)(Nn).concat([t])),h.Am.success((0,o.jsxs)("div",{children:["Product added to cart"," ",(0,o.jsx)(D(),{href:"/cart",children:(0,o.jsx)("a",{className:"font-sm p-2 text-reset",children:"View Cart"})})]}))}},ei=function(){var e=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,v._J)("",I.itemType,I.itemId,(0,d.isEmpty)(Ze.phone)?Ze.email:Ze.phone,re)];case 1:return"1"==e.sent()?Ee.reload():ti(Rn),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ni=function(){return Pe.current=new Date,(0,ee.bJ)(Ne.web_apiurl).then((function(e){if(e.data.length>0){var n=e.data[0];n&&Se((0,B.h)(n.is_paid))}return bt(e.data[0]),e.data[0]}))},ti=function(){var n=(0,i.Z)((function(){var n,t,i,r,s,o,c=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=c.length>0&&void 0!==c[0]&&c[0],"0"==I.allow_payment||"-1"==I.price&&"1"!=I.showEmiPay?(h.Am.warn("Purchase is disabled for this item"),[2]):(Ye(null!==(r=e.couponCode)&&void 0!==r?r:""),Ge(e.addressDetails),We(e.selectedPlan),cn(e.creditsApplied),"undefined"!=typeof(null===window||void 0===window?void 0:window.fbq)&&window.fbq("track","InitiateCheckout"),"undefined"!=typeof(null===window||void 0===window?void 0:window.gtag)&&window.gtag("event","begin_checkout"),"1"==I.offline_test?Ze?(Nt(),[2]):(be(),[2]):"1"==I.enable_broker_purchase?Ze?(qt(),[2]):(be(),[2]):("boolean"==typeof n?(Bn(n||!(0,d.isEmpty)(e.selectedInstallments)),n||Hn([])):(0,B.h)(n)||Hn([]),O?[4,O()]:[3,2]));case 1:if(0==(s=a.sent()))return[2];1==s&&xe(!0),a.label=2;case 2:return ve?"-10"!=I.price?[3,4]:[4,ii()]:(we(I.price>0),je(!0),be(),lt(!0),[2]);case 3:return a.sent(),[2];case 4:return St&&!ue&&(0,d.isEmpty)(In)?[4,ni()]:[3,6];case 5:if((o=a.sent())&&"0"==o.is_paid&&!Et&&Ft)return Gt(),[2];a.label=6;case 6:return I.study_material_id>0&&"0"==I.study_material_compulsory&&(0,d.isEmpty)(qn)||I.book_id>0&&"0"==I.book_compulsory&&(0,d.isEmpty)(qn)?(Yt(),[2]):1==n&&(0,d.isEmpty)(zn)?(Vt(),[2]):(null===(t=I.pricingPlans)||void 0===t?void 0:t.length)>0&&(0,d.isEmpty)(zn)?(Ht(),[2]):(null===(i=I.subscription_plans)||void 0===i?void 0:i.length)>0?(Wt(),[2]):(Kt(),[2])}}))}));return function(){return n.apply(this,arguments)}}(),ii=function(){var e=(0,i.Z)((function(){var e,n,t,i,r,s,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:Ln(!0),a.label=1;case 1:if(a.trys.push([1,7,8,9]),(0,d.isEmpty)(Fe))return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),Fe.user_id=(0,u.getCookie)(b.JR),Fe.email=Ze.email,[4,(0,v.AK)(Fe)];case 3:if((e=a.sent())<=0)throw new Error("Invalid address id");return[3,5];case 4:throw n=a.sent(),console.log("Invalid address id",n),new Error("Invalid address id");case 5:return t={coupon_code:Be,item_id:I.id,item_type:I.itemType},e&&(t.address_id=e),[4,(0,v.Pv)(t)];case 6:return"200"==(i=a.sent()).status&&(h.Am.success(i.message),Ee.push("/purchases")),[3,9];case 7:return r=a.sent(),h.Am.error((null===(s=r.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||"Error occured. Please try again later."),[3,9];case 8:return Ln(!1),[7];case 9:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ri=function(){var e=(0,i.Z)((function(e){var n,t,r,s;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:if("5"==I.itemType&&(0,d.isEmpty)(Fe))return Ut(),[2];if(I.book_id>0&&"1"==I.book_compulsory&&!kt&&(0,d.isEmpty)(Fe))return Ut(),[2];if(I.book_id>0&&"0"==I.book_compulsory&&!(0,d.isEmpty)(qn)&&(0,d.isEmpty)(Fe))return Ut(),[2];if(Ct){if([b.Qi.NO_VERIFICATION,b.Qi.PRE_PURCHASE].includes(It)&&!Ce.current)return De(!1),Jt(!0),[2];if(!Ae.current){if(Ot===b.ng.OTP)return De(!1),Qt(!0),[2];if(Ot===b.ng.AADHAAR_ESIGN)return De(!1),$t(!0),[2]}}return t=(0,u.getCookie)(b.JR),(0,d.isEmpty)(t)?(h.Am.error("Please login to purchase course"),we(!0),je(!0),be(),[2]):dt<=0?[4,ii()]:[3,2];case 1:return o.sent(),[2];case 2:return r={userid:t,itemid:I.itemId,itemtype:I.itemType,coupon_code:null!==Be&&void 0!==Be?Be:"",currency:vn},(0,d.isEmpty)(Ve)||(r.pricing_plan_id=Ve.id),(e||Rn)&&(r.installment_no=zn.join(",")),null!=on&&on>0&&(r.refer_credits=on),I.study_material_id>0&&"0"==I.study_material_compulsory&&!(0,d.isEmpty)(qn)?r.is_studymaterial_selected="1":(I.book_id>0&&"0"==I.book_compulsory&&!(0,d.isEmpty)(qn)||I.book_id>0&&"1"==I.book_compulsory&&!kt)&&(r.is_book_selected="1"),re&&(r.is_extended="1"),St&&(r.test_pass_mandatory=Et?"1":"0",(ue||"1"==In||Et)&&(r.is_testpass_selected="1"),Et&&Tt&&(r.is_testpass_selected="0")),Ln(!0),(s=(null===(n=I.subscription_plans)||void 0===n?void 0:n.length)>0&&st)&&(r.subscription_plan_id=st.rzp_plan_id),(s?v.yO:v.LV)(r).then(function(){var e=(0,i.Z)((function(e){var n,i,o,c,l,p,m,_,f,g;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(!e)throw new Error("Invalid request: no response from server");if(!e.isSameSignature)throw new Error("Invalid request: signature mismatch");if(n=(0,G.Od)(),De(!1),nn(!1),i=e.amount,I.actualPrice=e.amount/100,s){if(I.subscription_plan_id=st.rzp_plan_id,I.subscription_id=e.subscription_id,!e.subscription_id)throw new Error("Invalid request: subscription not created")}else if(I.orderId=e.order_id,!e.order_id)throw new Error("Invalid request: order not created");return o={base_url:Ne.web_apiurl,user_id:t,item_type:I.itemType,item_id:I.itemId,amount:i,source:"newwebsite"},(0,d.isEmpty)(Ve)||(o.pricing_plan_id=Ve.id),(0,d.isEmpty)(Be)||(o.coupon_code=Be),(null===zn||void 0===zn?void 0:zn.length)>0&&(o.installment_no=zn.join(",")),(0,d.isEmpty)(ce)||(o.payment_page_slug=ce),r.address_id>0&&(o.address_id=r.address_id),(0,d.isEmpty)(Fe)?[3,2]:(Fe.user_id=t,Fe.email=Ze.email,[4,(0,v.AK)(Fe)]);case 1:if((c=a.sent())<=0)throw new Error("Invalid address id");o.address_id=c,a.label=2;case 2:if(I.study_material_id>0&&"0"==I.study_material_compulsory&&!(0,d.isEmpty)(qn)?o.is_studymaterial_selected="1":(I.book_id>0&&"0"==I.book_compulsory&&!(0,d.isEmpty)(qn)||I.book_id>0&&"1"==I.book_compulsory&&!kt)&&(o.is_book_selected="1"),St&&(o.test_pass_mandatory=Et?"1":"0",(ue||"1"==In||Et)&&(o.is_testpass_selected="1"),Et&&Tt&&(o.is_testpass_selected="0")),null!=on&&on>0&&(o.refer_credits=on),s&&(o.subscription_plan_id=st.rzp_plan_id,o.subscription_id=e.subscription_id),l=!1,["item_id","item_type","base_url","user_id"].forEach((function(e){if(!(0,d.has)(o,e))return l=!0,void h.Am.error("Missing required key ".concat(e))})),l)return[2];if(p=(0,u.getCookie)("campaign_url"),m=(0,u.getCookie)(b.KH),p||(p=localStorage.getItem("campaign_url")),o.campaign_url=p,_={key:Ne.web_razorpaykey,currency:vn,name:I.title,description:I.title,image:I.image,amount:i,payment_capture:1,notes:o,prefill:{name:null===Ze||void 0===Ze?void 0:Ze.name,email:null===Ze||void 0===Ze?void 0:Ze.email,contact:null===Ze||void 0===Ze?void 0:Ze.phone},order_id:e.order_id,token:m},s&&(_.subscription_id=e.subscription_id),window.fbq&&window.fbq("track","AddPaymentInfo"),window.gtag&&window.gtag("event","add_payment_info"),"1"==Ne.web_enableclientrazorpay){if(_.handler=function(e){si(),oi()},_.ondismiss=function(){ai(b.$t.PAYMENT_CANCELLED.label),(0,v.ju)(e.order_id)},!(f=window.Razorpay))return[2];(g=new f(_)).on("payment.failed",(function(e){ai(b.$t.PAYMENT_GATEWAY_ERROR.label)})),g.open()}else n?(_.origin_page=window.location.href,_.modal={backdropclose:!1,escape:!1},(0,v.JH)(_).then((function(e){window.location.href="https://checkout.classx.co.in/payment-ios?id="+e.data}))):(wn(!0),window.onmessage=function(e){"cancel"==e.data?(ai(b.$t.PAYMENT_CANCELLED.label),(0,v.ju)(I.orderId),wn(!1),localStorage.removeItem("rzp_options")):"success"==e.data&&si()},localStorage.setItem("rzp_options",JSON.stringify(_)));return[2]}}))}));return function(n){return e.apply(this,arguments)}}()).catch((function(e){var n,t;Ln(!1),wn(!1),console.error(e),h.Am.error((null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||e.message||"Error occurred, please try again later")})),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),si=function(){localStorage.removeItem("rzp_options"),e.onPaymentSuccess&&e.onPaymentSuccess({orderId:I.orderId,finalPrice:I.actualPrice}),window.fbq&&window.fbq("track","Purchase",{value:I.price,currency:vn}),window.gtag&&window.gtag("event","purchase",{value:I.price,currency:vn}),ue&&window.location.reload(),(0,d.isEmpty)(Ne.web_paymentpagesuccesslink)?zt():window.location.href=Ne.web_paymentpagesuccesslink,wn(!1)},ai=function(e){var n,t=sessionStorage.getItem(b.dA.PAYMENT_LEADS);if(null===(n=Object.values(b.$t).find((function(n){return n.label===e})))||void 0===n?void 0:n.frequencyOnce)try{var i,r=null!==(i=JSON.parse(null!==t&&void 0!==t?t:"[]"))&&void 0!==i?i:[];if(r.find((function(n){return n.remarks===e&&n.itemid===I.itemId&&n.itemtype===I.itemType})))return;r.push({itemid:I.itemId,itemtype:I.itemType,remarks:e,timestamp:(new Date).toISOString()}),sessionStorage.setItem(b.dA.PAYMENT_LEADS,JSON.stringify(r))}catch(l){console.error("Error inserting payment leads in local storage",l)}var s=(0,u.getCookie)(b.z1),a=(0,u.getCookie)(b.JR),o=(0,u.getCookie)(b.KH),c={userid:a,itemid:I.itemId,itemtype:I.itemType,remarks:e,source:"website"};(0,v.Cg)(s,c,o).then((function(e){}))},oi=function(){var e=(0,i.Z)((function(){var e,n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return(e=(0,u.getCookie)("campaign_url"))||(e=localStorage.getItem("campaign_url")),!(0,d.isEmpty)(e)||Be&&["SNFAD","SNFADYT","SNFFB","SNFGA"].find((function(e){var n;return null===(n=null===Be||void 0===Be?void 0:Be.toUpperCase())||void 0===n?void 0:n.includes(e)}))?(n=(0,u.getCookie)(b.KH),[4,(0,z.UU)(e||"",null===Ze||void 0===Ze?void 0:Ze.userid,I.orderId,Be,"".concat(vn,": ").concat(dt),n)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ci=function(){var e=(0,i.Z)((function(e){var n,t,i,r,s,o=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,(t=window.Digio)?[3,2]:(h.Am.error("Digio SDK not found, retrying..."),di(),[4,new Promise((function(e){return setTimeout(e,1e3*(n+1))}))]);case 1:return a.sent(),[2,ci(e,n+1)];case 2:return i={environment:"production",callback:function(e){if(e.error_code)return Ae.current=!1,Ln(!1),h.Am.error("Error occurred in process: ".concat(e.error_code)),console.log("error occurred in process",e);Ln(!1),$t(!1),Ae.current=!0,ri(Rn)},logo:Ne.web_logotransparent,theme:{primaryColor:Ne.web_themecolor||"#000000",secondaryColor:Ne.web_themesecondarybtncolor||"#000000"},Is_redirection_approach:!1,is_iframe:!0,event_listener:function(e){console.log(e)}},r=Ze.phone,(s=new t(i)).init(),s.submit(e,r),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),li=function(){var e=(0,i.Z)((function(){var e,n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),Ln(!0),[4,(0,se.s)({item_id:I.itemId,item_type:I.itemType})];case 1:return(e=t.sent().document_id)?($t(!1),Ae.current=!0,ci(e),[3,3]):(h.Am.error("Failed to initiate Aadhar e-sign"),Ln(!1),$t(!0),[2]);case 2:return n=t.sent(),console.error(n),Ln(!1),$t(!0),h.Am.error("Failed to initiate Aadhar e-sign"),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ui=function(){var e=(0,i.Z)((function(e){var n,t,i,r,s,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),Ln(!0),[4,(0,se.$Z)({item_id:I.itemId,item_type:I.itemType,pan_number:e.pan_card_number,name_on_pan:e.name,date_of_birth:e.date_of_birth})];case 1:return(n=a.sent()).success?(Ce.current=!0,Ln(!1),Jt(!1),It===b.Qi.POST_PURCHASE?(zt(),Ue({item_id:I.itemId,item_type:I.itemType,showTelegram:(0,B.h)(I.is_tgconnect_enabled)}),[2,!0]):Ae.current?[3,3]:Ot===b.ng.OTP?(De(!1),Qt(!0),[2,!0]):Ot===b.ng.AADHAAR_ESIGN?(De(!1),$t(!0),[2,!0]):(ri(Rn),[2,!0])):(t=n.data.error_details)?[2,t]:(Ln(!1),h.Am.error("PAN verification failed"),[2,!1]);case 2:return i=a.sent(),Ln(!1),h.Am.error("Failed to verify PAN"),(s=null===(r=i.response)||void 0===r?void 0:r.data)&&"object"===typeof s&&(o=s.data.error_details)?[2,o]:[2,!1];case 3:return[2,!1]}}))}));return function(n){return e.apply(this,arguments)}}(),di=function(){if(!document.getElementById(b.YB)){var e=document.createElement("script");e.type="text/javascript",e.src=pe,e.id=b.YB,document.body.appendChild(e)}};return(0,m.useImperativeHandle)(n,(function(){return{onBuyNow:ti}})),(0,m.useEffect)((function(){pt(e.finalPrice)}),[e.finalPrice]),(0,m.useEffect)((function(){!(0,d.isEmpty)(Fe)&&(0,d.isEmpty)(e.addressDetails)&&ri(Rn)}),[Fe]),(0,m.useEffect)((function(){(0,d.isEmpty)(In)||ti(Rn)}),[In]),(0,m.useEffect)((function(){U&&1==Le&&(De(!1),ri(Rn))}),[Le,U]),(0,m.useEffect)((function(){Dt&&!T&&(0,z.PC)(vn).then((function(e){_t(e)}))}),[Dt,T]),(0,m.useEffect)((function(){At&&di()}),[At]),(0,o.jsxs)("div",{children:[(0,o.jsx)(Q(),{src:"https://checkout.razorpay.com/v1/checkout.js"}),Dt&&!T&&I.price>=0&&(0,o.jsxs)(_.Z,{className:"mb-2 align-items-center",children:[(0,o.jsx)(f.Z,{className:"",children:"Choose Currency:"}),(0,o.jsx)(f.Z,{className:"font-xl font-bold ",children:(0,o.jsx)(g.Z,{type:"select",bsSize:"sm",className:"py-0 ms-auto",style:{width:"80px"},onChange:function(e){xn(e.target.value),yt(ht[e.target.value]*I.price)},value:vn,children:Object.keys(ht).map((function(e){return(0,o.jsx)("option",{children:e},e)}))})})]}),"INR"!=vn&&gt>0&&(0,o.jsxs)(_.Z,{className:"mb-2",children:[(0,o.jsxs)(f.Z,{children:["Total in ",vn," (approx.)"]}),(0,o.jsx)(f.Z,{className:"font-xl font-bold text-end",children:gt.toFixed(2)})]}),("1"!=I.is_paid||re||"1"==I.is_paid&&"0"!=I.status&&5==I.itemType)&&(0,o.jsxs)(y.Z,{onClick:function(){Te(!Pt),ti(!1),Ue({item_id:I.itemId,item_type:I.itemType,showTelegram:(0,B.h)(I.is_tgconnect_enabled)})},id:"buyButton",color:ie||"primary",block:!0,disabled:ge||"1"==I.is_out_of_stock,children:[Mn&&(0,o.jsx)(l.G,{spin:!0,icon:c.LM3,className:"me-2"}),Rt]}),("1"!=I.is_paid||re)&&Bt&&Pt&&(0,o.jsxs)(y.Z,{onClick:function(){Te(Pt),ti(!1),Ue({item_id:I.itemId,item_type:I.itemType,showTelegram:(0,B.h)(I.is_tgconnect_enabled)})},className:"mt-2",id:"buyButton",color:ie||"primary",block:!0,disabled:"1"==I.is_out_of_stock||kn||ge,children:[Mn&&(0,o.jsx)(l.G,{spin:!0,icon:c.LM3,className:"me-2"}),Bt]}),"1"==I.showEmiPay&&(0,o.jsx)(y.Z,{onClick:function(){Te(!1),ti(!0)},color:"white",className:"mt-2 border",block:!0,children:"Buy with installment"}),"1"==I.offline_test&&(0,o.jsx)(de,{isOpen:wt,toggle:Nt,onBuyNow:ri,product:I}),Le&&(0,o.jsx)(A,{isOpen:Le,toggle:Kt,onBuyNow:ri,exchangeRates:ht,product:I,couponCode:Be,setCouponCode:function(e){return Ye(null!==e&&void 0!==e?e:"")},isLoading:Mn,studyMaterialSelected:qn,selectedInstallments:zn,selectedSubscriptionPlan:st,creditsApplied:on,setCreditsApplied:cn,setFinalPrice:pt,isEmiSelected:Rn,currency:vn,setCurrency:xn,selectedPlan:Ve,testPass:Et||"1"!=In?null:xt,isLinkedCourse:_e,isTestPass:ue}),En&&(0,o.jsx)(M,{isOpen:En,toggle:Vt,onBuyNow:function(){Kt(),Vt()},product:I,selectedInstallments:zn,setSelectedInstallments:Hn,isLoading:Mn}),(0,o.jsx)(F.Z,{isOpen:$e,toggle:zt,link:Y,productDetails:He,onCompleteKYC:function(){Ln(!1),Jt(!0),zt()},isKycCompleted:Ce.current}),en&&(0,o.jsx)(j.Z,{isOpen:en,toggle:Ut,addressDetails:Fe,setAddressDetails:Ge,onBuyNow:function(e){Ge(e),ri()}}),(null===(N=I.pricingPlans)||void 0===N?void 0:N.length)>0&&(0,o.jsx)(R,{isOpen:rn,toggle:Ht,pricingPlans:I.pricingPlans,selectedPlan:Ve,setSelectedPlan:We,couponResponse:ae,onBuyNow:function(){I.mrp=Ve.mrp,I.price=Ve.price,I.price_without_gst=Ve.price_without_gst,Kt(),Ht()}}),(null===(P=I.subscription_plans)||void 0===P?void 0:P.length)>0&&(0,o.jsx)(q,{isOpen:tt,toggle:Wt,subscriptionPlans:I.subscription_plans,selectedPlan:st,onPlanSelected:function(e){I.price=e.price,I.price_without_gst=e.price_without_gst,I.mrp=e.mrp,at(e),Wt(),Kt()}}),Kn&&(0,o.jsx)(S,{isOpen:Kn,toggle:Yt,onBuyNow:function(e){var n;Yt(),e&&Fn(e),1!=Rn?(null===(n=I.pricingPlans)||void 0===n?void 0:n.length)>0?Ht():Kt():Vt()},product:I,studyMaterialSelected:qn,setStudyMaterialSelected:Fn,isLoading:Mn}),xt&&Ft&&(0,o.jsx)(X,{testPass:xt,isOpen:Xn,toggle:Gt,onAdd:function(e){On(e),Gt()},isLoading:Mn}),(0,o.jsx)(K,{isOpen:Jn,toggle:qt,onPaymentSuccess:si,product:I}),(0,o.jsx)(J.Z,{isOpen:jn,toggle:function(){wn((function(e){var n=!e;return n||$e||(ai(b.$t.PAYMENT_CANCELLED.label),(0,v.ju)(I.orderId)),n}))},isLoading:Mn,setIsLoading:Ln}),un&&(0,o.jsx)(te.Z,{isOpen:un,toggle:function(){return Jt(!1)},onVerifyPan:ui,isLoading:Mn}),mn&&(0,o.jsx)(ne,{isOpen:mn,toggle:function(){return $t(!1)},isLoading:Mn,onProceed:li}),fn&&(0,o.jsx)(oe,{isOpen:fn,toggle:function(){return Qt(!1)},isLoading:Mn,product:I,onVerifyOtp:function(){Qt(!1),Ln(!1),Ae.current=!0,ri(Rn)}})]})}var he=(0,m.forwardRef)(me)},10596:function(e,n,t){t.d(n,{Z:function(){return j}});var i=t(47568),r=t(14924),s=t(26042),a=t(69396),o=t(97582),c=t(85893),l=t(96486),u=t(67294),d=t(26683),p=t(83024),m=t(60766),h=t(89163),_=t(3126),f=t(87261),g=t(23149),y=t(84082),v=t(59417),x=t(67814),b=t(73716);function j(e){var n=e.isOpen,t=e.toggle,j=e.onVerifyPan,w=e.isLoading,Z=(0,u.useState)({name:"",pan_card_number:"",date_of_birth:""}),N=Z[0],P=Z[1],k=(0,u.useState)({name:"",pan_card_number:"",date_of_birth:""}),S=k[0],E=k[1],C=function(e){var n=e.target,t=n.name,i=n.value;E((0,a.Z)((0,s.Z)({},S),(0,r.Z)({},t,i)))},A=function(){var e=(0,i.Z)((function(){var e,n,i,r,a,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e={name:"",pan_card_number:"",date_of_birth:""},new Map([["name","Full name as per PAN Card"],["pan_card_number","PAN Number"],["date_of_birth","Date of Birth as per PAN Card"]]).forEach((function(n,t){(0,l.has)(S,t)||(e[t]="Please enter ".concat(n))})),S.pan_card_number&&!(0,b.ue)(S.pan_card_number)&&(e.pan_card_number="Please enter a valid PAN number"),S.date_of_birth&&!(0,b.oO)(S.date_of_birth)&&(e.date_of_birth="Please enter a valid date of birth"),P(e),Object.values(e).some((function(e){return""!==e}))?[2]:[4,j(S)];case 1:return"boolean"===typeof(n=o.sent())&&n?t():"object"===typeof n?(i=n.date_of_birth_match,r=n.is_pan_valid,a=n.name_match,c={name:"",pan_card_number:"",date_of_birth:""},i||(c.date_of_birth="Date of birth does not match"),r||(c.pan_card_number="Please enter a valid PAN number"),a||(c.name="Name does not match"),P((0,s.Z)({},c))):P({pan_card_number:"Please enter a valid PAN number",date_of_birth:"Please enter a valid date of birth",name:"Please enter a valid name"}),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)(d.Z,{isOpen:n,toggle:t,scrollable:!0,children:[(0,c.jsx)(p.Z,{toggle:t,children:"Please enter your PAN details"}),(0,c.jsxs)(m.Z,{children:[(0,c.jsxs)(h.Z,{className:"d-flex flex-column",children:[(0,c.jsx)(_.Z,{className:"required",children:"Enter your PAN Number"}),(0,c.jsx)(f.Z,{type:"text",name:"pan_card_number",placeholder:"Enter your PAN Number",invalid:!!N.pan_card_number,value:S.pan_card_number,onChange:C}),N.pan_card_number&&(0,c.jsx)("small",{className:"text-danger",children:N.pan_card_number})]}),(0,c.jsxs)(h.Z,{children:[(0,c.jsx)(_.Z,{className:"required",children:"Full name as per PAN Card"}),(0,c.jsx)(f.Z,{type:"text",name:"name",placeholder:"Enter your name as per PAN Card",value:S.name,onChange:C,invalid:!!N.name}),N.name&&(0,c.jsx)("small",{className:"text-danger",children:N.name})]}),(0,c.jsxs)(h.Z,{children:[(0,c.jsx)(_.Z,{className:"required",children:"Date of Birth as per PAN Card"}),(0,c.jsx)(f.Z,{type:"date",name:"date_of_birth",placeholder:"YYYY-MM-DD",value:S.date_of_birth,onChange:C,invalid:!!N.date_of_birth}),N.date_of_birth&&(0,c.jsx)("small",{className:"text-danger",children:N.date_of_birth})]})]}),(0,c.jsx)(g.Z,{children:(0,c.jsxs)(y.Z,{color:"primary",onClick:A,block:!0,children:[w&&(0,c.jsx)(x.G,{icon:v.LM3,className:"me-2",spin:!0}),"Verify PAN"]})})]})}}}]);