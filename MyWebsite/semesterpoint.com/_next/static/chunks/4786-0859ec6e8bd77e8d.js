"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4786],{44786:function(e,n,t){t.d(n,{Z:function(){return F}});var i=t(14924),r=t(26042),a=t(85893),o=t(67294),s=t(59417),l=t(67814),c=t(96486),u=t(45508),d=t(3751),v=t(96076),f=t(43704),m=t(89885),p=t(73716),g=t(91328),h=t(70789),y=t(68777),x=t(30381),T=t.n(x),w=t(49475),E=t(39154),N=t(91444),k=t(84082),b=t(7079),S=t(22490),j=t(57654),I=t(76585),L=t(29815);function B(e,n){if(null===n||void 0===n)return e;if(Array.isArray(n))return(0,L.Z)(n);if("object"===typeof n){var t=(0,r.Z)({},e);return Object.keys(n).forEach((function(e){var i=n[e],r=t[e];i&&"object"===typeof i&&!Array.isArray(i)?t[e]=B(r||{},i):t[e]=i})),t}return n}var A=B;window.deepMerge=B;var R=function(){return{xhr:{beforeRequest:function(e){e.headers||(e.headers={}),e.headers=A(e.headers,v.I2)}}}},D=t(84902),C=t(49458);function F(e){var n,t=function(){var e,n=null===(e=Ze.current)||void 0===e?void 0:e.getElementsByTagName("video")[0],t=T()(1e3*q),i=t.clone().add(n.duration,"seconds");if(T()().isBefore(i)){var r=T()().diff(t,"seconds");n.currentTime=r,Re.restart(1e3*i.unix(),!0)}},x=function(e,n){var i=document.getElementById("videojs"),r={},a=window.videojs;if(a){var o=(0,D.Z)(e,".mp4");r=X&&!o?{autoplay:!1,controls:!1,liveui:!1,responsive:!0,preload:"auto",fluid:!0,html5:{nativeAudioTracks:!0,nativeVideoTracks:!0,nativeTextTracks:!0,vhs:{experimentalLLHLS:!0,experimentalBufferBasedABR:!0}}}:Me&&!o?{autoplay:!1,controls:!1,responsive:!0,preload:"auto",fluid:!0,html5:{vhs:{overrideNative:!0},nativeAudioTracks:!0,nativeVideoTracks:!0,nativeTextTracks:!0}}:{autoplay:!1,controls:!1,responsive:!0,preload:"auto",fluid:!_,html5:{vhs:{overrideNative:!0},nativeAudioTracks:!1,nativeVideoTracks:!1}};var s=R();a.Vhs=A(a.Vhs,s);var l=a(i,r,(function(r){var a,o=null===(a=Ze.current)||void 0===a?void 0:a.getElementsByTagName("video")[0];if(o){var s=new j.y(o.volume,(function(e){o.volume=e}),(function(e){var n=document.querySelector(".volume-control");n&&(n.style.opacity=e?"0.5":"1",n.style.pointerEvents=e?"none":"auto")}));if(window._volumeControls=window._volumeControls||new Map,window._volumeControls.set((null===i||void 0===i?void 0:i.id)||"player",s),o.addEventListener("timeupdate",Pe),Xe){var c=l.qualityLevels();c.on("change",(function(){var e=c.selectedIndex,n=c[e];Ge({target:{value:n.label.replace("".concat(e,"-"),"")}})}))}o.addEventListener("loadedmetadata",(function(){if(console.log("loadedmetadata called"),"1"!=Ce.web_enablefullpagevideo||n){var i;if(e&&!Ae.current)Ae.current=null!==(i=be.videoId)&&void 0!==i?i:F;if(Oe>0)!isNaN(Oe.current)&&isFinite(Oe.current)&&(o.currentTime=Oe);else{var a={};try{var s=localStorage.getItem(v.bW);a=s?JSON.parse(s):{}}catch(r){console.log("error - parsing video progress",r)}var c,u=a[Ae.current],d=null!==(c=o.duration)&&void 0!==c?c:0;Ae.current&&u&&isFinite(u)&&isFinite(d)&&u<d&&(o.currentTime=u)}o.playbackRate=fe,"1"==V&&t(),l.play().then((function(e){re(!0),Te(!1)})).catch((function(e){Te(!0)}))}})),l.off("error"),Xe||l.on("error",(function(){var n=l.error();if(n&&3===n.code&&navigator.onLine&&O&&Be.current<=3){console.error("Handling missing chunk error");var t=O.findIndex((function(n){return n.path==e}));Ge({target:{value:O[t==O.length-1?0:t+1].path}}),Be.current+=1}})),l.ready((function(){var e=l.tech();if(e&&e.name&&e.hls){var n={},t=e.hls,i=t.xhr;t.xhr=function(e,r){if(!e.uri.includes(".key")&&!e.uri.includes("ck."))return i.call(t,e,r);n[e.uri]?r(null,{response:n[e.uri],responseURL:e,uri:e.uri,responseType:"arraybuffer"}):fetch(e.uri).then((function(e){return e.arrayBuffer()})).then((function(t){n[e.uri]=t,r(null,{response:n[e.uri],responseURL:e,uri:e.uri,responseType:"arraybuffer"})})).catch((function(e){console.error("Failed to preload Clear Key segment:",e)}))}}})),o.addEventListener("ended",(function(e){re(!1)}))}}));Me&&!o&&"function"==typeof l.eme&&(console.log("Calling player.eme()"),l.eme());var c=Me?{type:"application/dash+xml",src:e||We,keySystems:{"com.widevine.alpha":(0,u.NA)(M)}}:{type:"application/x-mpegURL",src:e||We,withCredentials:z};o&&(c={type:"video/mp4",src:e}),e.endsWith(".aac")&&(c={type:"audio/aac",src:e}),l.src(c)}},L=function(){var e,n=null===(e=Ze.current)||void 0===e?void 0:e.getElementsByTagName("video")[0];if(N.Am.error("Network disconnected."),n.buffered.length>0){var t=n.buffered.end(0);n.currentTime+5>=t&&n.pause()}},B=function(e){var n;e.preventDefault(),e.stopImmediatePropagation();var t=null===(n=Ze.current)||void 0===n?void 0:n.getElementsByTagName("video")[0];N.Am.success("You are back online."),t.paused||t.pause(),t.play().catch((function(e){console.error("Error resuming playback:",e)}))},F=e.videoId,O=e.qualities,Z=e.seekBarDisabled,M=e.video_key,X=e.low_latency_enabled,W=(e.setIsDrmNotPlaying,e.onBeforeQualityChange),U=e.isMobile,P=e.disableFluidMode,_=void 0!==P&&P,H=e.isPremier,V=void 0===H?"0":H,q=e.startDate,Q=e.withCredentials,z=void 0!==Q&&Q,G=e.enableAdaptiveBitrate,J=void 0===G?"0":G,Y=e.watermarkText,K=e.isAdmin,$=void 0!==K&&K,ee=e.debug,ne=void 0!==ee&&ee,te=(0,o.useState)(!1),ie=te[0],re=te[1],ae=(0,o.useState)(!1),oe=(ae[0],ae[1],(0,o.useState)(0)),se=oe[0],le=oe[1],ce=(0,o.useState)("00:00/00:00"),ue=ce[0],de=ce[1],ve=(0,o.useState)(1),fe=ve[0],me=ve[1],pe=(0,o.useState)(!1),ge=pe[0],he=pe[1],ye=(0,o.useState)(!0),xe=ye[0],Te=ye[1],we=(0,o.useState)(0),Ee=we[0],Ne=we[1],ke=(0,o.useState)(e.selectedQuality),be=ke[0],Se=ke[1],je=(0,o.useState)(e.selectedVideoFitOption||b.zz[0]),Ie=je[0],Le=je[1],Be=(0,o.useRef)(0),Ae=(0,o.useRef)(null!==(n=be.videoId)&&void 0!==n?n:F),Re=(0,d.useTimer)({autoStart:!1,expiryTimestamp:new Date}),De=(0,o.useContext)(m.Z),Ce=De.appConfig,Fe=De.currentUser,Oe=0,Ze=(0,o.useRef)(),Me=!(0,c.isEmpty)(M)&&!(0,S.h)(Ce.isWindowsApp),Xe="1"==J&&!Me&&!(0,D.Z)(e.src,".mp4")&&!(null===O||void 0===O?void 0:O.some((function(e){return(0,D.Z)(e.path,".mp4")})))&&!(0,p.IB)(),We=Xe?"https://appx-transcoded-videos.classx.co.in/manual4.m3u8":e.src,Ue=(0,d.useTimer)({autoStart:!0,expiryTimestamp:(new Date).setSeconds((new Date).getSeconds()+v.kL),onExpire:function(){Ye()}}),Pe=function(){var e,n=null===(e=Ze.current)||void 0===e?void 0:e.getElementsByTagName("video")[0];if(n){!function(){var e,n=null===(e=Ze.current)||void 0===e?void 0:e.getElementsByTagName("video")[0];if(n&&n.buffered&&n.buffered.length>0){var t=100/n.duration*n.buffered.end(0);Ne(t)}}();var t=100/n.duration*n.currentTime;if(isNaN(t))le(0),de("00:00/00:00");else{le(t),Ve(n);var i=new Date(1e3*n.duration).toISOString().substr(11,8),r=new Date(1e3*n.currentTime).toISOString().substr(11,8),a=Math.floor(n.duration/3600),o=Math.floor(n.currentTime/3600);if(0!=a)if(0!=o)de(r+"/"+i);else{var s=r.split(":");r=s[1]+":"+s[2],de(r+"/"+i)}else{var l=i.split(":");if(i=l[1]+":"+l[2],0!=o)de(r+"/"+i);else{var c=r.split(":");r=c[1]+":"+c[2],de(r+"/"+i)}}}}};(0,o.useEffect)((function(){if(Xe){var e=_e(O);window.MS?window.MS[We]=e:window.MS=(0,i.Z)({},We,e)}x(We,!1)}),[]);var _e=function(e){var n="";return e.forEach((function(e){switch(e.quality){case"144p":case"144":n+="#EXT-X-STREAM-INF:BANDWIDTH=180000,RESOLUTION=240x144\n"+e.path+"\n";break;case"240p":case"240":n+="#EXT-X-STREAM-INF:BANDWIDTH=250000,RESOLUTION=426x240\n"+e.path+"\n";break;case"360p":case"360":n+="#EXT-X-STREAM-INF:BANDWIDTH=350000,RESOLUTION=640x360\n"+e.path+"\n";break;case"480p":case"480":n+="#EXT-X-STREAM-INF:BANDWIDTH=500000,RESOLUTION=854x480\n"+e.path+"\n";break;case"720p":case"720":n+="#EXT-X-STREAM-INF:BANDWIDTH=700000,RESOLUTION=1280x720\n"+e.path+"\n";break;case"1080p":case"1080":n+="#EXT-X-STREAM-INF:BANDWIDTH=1000000,RESOLUTION=1020x1080\n"+e.path+"\n"}})),n="#EXTM3U\n#EXT-X-VERSION:3\n"+n};(0,o.useEffect)((function(){var e,n=null===(e=Ze.current)||void 0===e?void 0:e.getElementsByTagName("video")[0];return n.requestPictureInPicture=function(){},document.addEventListener("keydown",qe),window.onStartupPlay=function(){n.play()},window.addEventListener("online",B),window.addEventListener("offline",L),function(){document.removeEventListener("keydown",qe),window.removeEventListener("online",B),window.removeEventListener("offline",L)}}),[]);var He,Ve=function(e){var n={};if("undefined"!==typeof localStorage)try{n=JSON.parse(localStorage.getItem(v.bW)||"{}")}catch(t){console.log("[storeCurrentTime] Error",t)}Ae.current&&e&&0!=e.currentTime&&isFinite(e.currentTime)&&isFinite(e.duration)&&(e.duration-e.currentTime<=5?(delete n[Ae.current],"undefined"!==typeof localStorage&&localStorage.setItem(v.bW,JSON.stringify(n))):(n[Ae.current]=e.currentTime,"undefined"!==typeof localStorage&&localStorage.setItem(v.bW,JSON.stringify(n))))},qe=function(e){"INPUT"!=e.target.tagName&&("ArrowLeft"==e.code?(e.preventDefault(),Qe(-5)):"ArrowRight"==e.code?(e.preventDefault(),Qe(5)):"Space"==e.code&&(e.preventDefault(),ze()))},Qe=function(e){var n,t=null===(n=Ze.current)||void 0===n?void 0:n.getElementsByTagName("video")[0],i=t.currentTime+e;t.currentTime=i},ze=function(){var e,n=null===(e=Ze.current)||void 0===e?void 0:e.getElementsByTagName("video")[0];n.paused?n.play():n.pause(),re(!n.paused),Te(!1),n.paused||"1"!=V||t()},Ge=function(e){var n,t=e.target.value,i=e.target.name,r=O.find((function(e){return e.path==t&&e.quality==i})),a=null===(n=Ze.current)||void 0===n?void 0:n.getElementsByTagName("video")[0];if((Ve(a),Oe=a.currentTime,W)&&!1===W(r))return;Se(r),re(!0),Xe||x(t,!0)},Je=function(){var e=document.getElementById("hlsplayer");if((!e||!e.classList.contains("user-active"))&&(e.classList.remove("user-inactive"),e.classList.add("user-active"),!Ue.seconds<=1)){var n=(new Date).setSeconds((new Date).getSeconds()+v.kL);Ue.restart(n,!0)}},Ye=function(){var e=document.getElementById("hlsplayer");e&&(e.classList.remove("user-active"),e.classList.add("user-inactive"))};return(0,a.jsxs)("div",{id:"hlsplayer",ref:Ze,onClick:function(e){if(!(e.target.closest("#hls-player-video-controls")||e.target.closest("#floatingBtns"))){var n=document.getElementById("hlsplayer");n&&n.classList.contains("user-active")?(Ye(),Ue.pause()):Je()}},onMouseMove:Je,onTouchStart:Je,style:{position:"relative"},children:[ne&&(0,a.jsx)(C.Z,{isMobile:U,componentSuffix:"VideojsHlsPlayer"}),_&&(0,a.jsx)(w.Z,{}),!(0,c.isEmpty)(Y)&&(0,a.jsx)(E.Z,{message:Y,isAdmin:$},"watermark"),(0,c.isEmpty)(Y)&&"0"!=Ce.web_enablewatermarkonvideos&&Fe&&(0,a.jsx)(E.Z,{isAdmin:$},"watermark"),(0,a.jsx)("video",{id:"videojs",style:(0,r.Z)({width:"100%",objectFit:null!==(He=Ie.value)&&void 0!==He?He:"contain"},_?{height:"100vh"}:{maxHeight:"100vh"}),className:"video-js vjs-big-play-centered",controlsList:"nodownload",poster:v.u7,disablePictureInPicture:!0,onContextMenu:function(e){e.preventDefault()},playsInline:!0,controls:!1}),xe?(0,a.jsx)(l.G,{icon:s.aQp,size:"3x",className:"position-absolute center opacity-75 cursor-pointer text-gray",onClick:ze}):(0,a.jsxs)("div",{id:"floatingBtns",className:"position-absolute center opacity-75 align-items-center",children:[!Re.isRunning&&(0,a.jsx)(k.Z,{color:"link",onClick:function(){return Qe(-10)},children:(0,a.jsx)(l.G,{size:"2x",icon:s.DYF})}),(0,a.jsx)(k.Z,{color:"link",onClick:ze,children:(0,a.jsx)(l.G,{icon:ie?s.ul5:s.aQp,size:"3x",className:"mx-4"})}),!Re.isRunning&&(0,a.jsx)(k.Z,{color:"link",onClick:function(){return Qe(10)},children:(0,a.jsx)(l.G,{size:"2x",icon:s.irl})})]}),(0,a.jsxs)("div",{id:"hls-player-video-controls",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:["1"!=V&&(0,a.jsx)("div",{className:"duration mx-2 font-sm d-md-none text-white",children:ue.split("/")[0]}),!Re.isRunning&&(0,a.jsx)(h.Z,{currentTime:se,bufferedTime:Ee,onTimeChange:function(e){var n,t=null===(n=Ze.current)||void 0===n?void 0:n.getElementsByTagName("video")[0],i=t.duration*(e.target.value/100);t.currentTime=i,le(e.target.value)},seekBarDisabled:Z}),"1"!=V&&(0,a.jsx)("div",{className:"duration mx-2 font-sm d-md-none text-white",children:ue.split("/")[1]})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between px-2",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("div",{id:"hls-play-pause",className:"icon",onClick:ze,children:(0,a.jsx)(l.G,{icon:ie?s.XQY:s.zc})}),!Re.isRunning&&(0,a.jsx)("div",{className:"icon",onClick:function(){return Qe(-10)},children:(0,a.jsx)("img",{src:"/icons/backwards.svg",alt:"Rewind 10 seconds"})}),!Re.isRunning&&(0,a.jsx)("div",{className:"icon",onClick:function(){return Qe(10)},children:(0,a.jsx)("img",{src:"/icons/forward.svg",alt:"Forward 10 seconds"})}),!U&&(0,a.jsx)(f.Z,{}),"1"!=V&&(0,a.jsx)("div",{className:"duration ms-2 font-sm d-none d-md-block text-white",children:ue})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("div",{className:"speed-di",children:(0,a.jsx)(y.Z,{speed:fe,onSpeedChange:function(e){var n,t=e.target.value;(null===(n=Ze.current)||void 0===n?void 0:n.getElementsByTagName("video")[0]).playbackRate=t,me(t)}})}),(0,a.jsx)("div",{className:"video-fit-options-selector-div",children:(0,a.jsx)(b.ZP,{selectedVideoFitOption:Ie,onVideoFitOptionChange:function(e){Le(e)}})}),O&&be&&O.length>0&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(g.Z,{qualities:O,selectedQuality:be,onQualityChange:Xe?function(e){var n=window.videojs;if(n)for(var t=n.getPlayer("videojs").qualityLevels(),i=e.target.value,r=O.findIndex((function(e){return e.path==i})),a=0;a<t.length;a++)t[a].enabled=a==r}:Ge})}),(0,a.jsx)("div",{id:"hls-full-screen",className:"icon",style:U?{visibility:"hidden"}:{},onClick:function(){var e,n=document.getElementById("hlsplayer"),t=null===(e=Ze.current)||void 0===e?void 0:e.getElementsByTagName("video")[0],i=function(){document.fullscreenElement||document.webkitFullscreenElement?he(!0):(he(!1),t&&t.paused&&re(!1))};if(!ge&&navigator.userAgent.includes("Mac")&&"ontouchend"in document&&t.webkitEnterFullScreen)return console.log("ipad found"),t.webkitEnterFullScreen(),void t.addEventListener("webkitendfullscreen",i);document.fullscreenElement?(document.exitFullscreen(),screen.orientation.lock&&screen.orientation.lock("natural")):((0,I.Zx)(n,t,i),screen.orientation.lock&&screen.orientation.lock("landscape-primary"))},children:(0,a.jsx)(l.G,{icon:ge?s.Qj4:s.TL5,className:"me-"})})]})]})]})]})}},84902:function(e,n,t){n.Z=function(e,n){if(!e||"string"!==typeof e)return!1;var t=e;try{var i;t=null===(i=new URL(e))||void 0===i?void 0:i.pathname}catch(r){console.log("error - parsing video url",r)}return Array.isArray(n)?n.some((function(e){return null===t||void 0===t?void 0:t.endsWith(e)})):null===t||void 0===t?void 0:t.endsWith(n)}}}]);